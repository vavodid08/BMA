var previousFocusedBeforeProcesing;var secondFactorLoading=false;if(!window.console){console={log:function(){}}}function saltarBack(b){tecla=(document.all)?b.keyCode:b.which;if(tecla==8){if(!recorrerForm()){pararPropagacionEvento(b)}else{var a=document.getElementById("elementWithFocus");if(a.nodeName!="INPUT"){pararPropagacionEvento(b)}}}}document.onkeydown=function(){if(a!=null){var a=(a)?a:((window.event)?window.event:null);var b=(a.target)?a.target:((a.srcElement)?a.srcElement:null);if((a.keyCode==8)&&(b.type!="text")){return false}}};function recorrerForm(){var c="";var f;var b="";var e;var d=$("#elementWithFocus").val();f=getDocumentMainForm();e=getDocumentMainFormModal();if(f==null){f=document.getElementById("login_form")}if(e==null){e=document.getElementById("login_form")}if(f!=null){for(var a=0;a<f.elements.length;a++){c=f.elements[a];if(d==c.id){return true}}}if(e!=null){for(var a=0;a<e.elements.length;a++){b=e.elements[a];if(d==b.id){return true}}}if(d=="testinput"){return true}return false}function getDocumentMainForm(){return document.getElementById("main_form")}function getDocumentMainFormModal(){return document.getElementById("main_form_modal")}function updateActualFocus(a){$("#elementWithFocus").val(a)}function pararPropagacionEvento(a){if(document.all){a.keyCode=0;a.cancelBubble=true;a.returnValue=false;a.retainFocus=true}if(a.stopPropagation){a.stopPropagation();a.preventDefault()}return false}var stIsIE=
/* @cc_on!@ */
false;function compare(d,c){au=new String(d);bu=new String(c);var e=null;var f=null;if(au.charAt(4)!="-"&&au.charAt(7)!="-"){e=parseFloat(au);f=parseFloat(bu)}if(isNaN(e)||isNaN(f)){as=au.toLowerCase();bs=bu.toLowerCase();if(as>bs){return 1}else{return -1}}else{return e-f}}function saveAndSetFocus(a){previousFocusedBeforeProcesing=document.activeElement;$("#"+a).focus()}function getConcatenedTextContent(c){var b="";if(c==null){return b}var d=c.childNodes;var a=0;while(a<d.length){var e=d.item(a);switch(e.nodeType){case 1:case 5:b+=getConcatenedTextContent(e);break;case 3:case 2:case 4:b+=e.nodeValue;break;case 6:case 7:case 8:case 9:case 10:case 11:case 12:break}a++}return b}var persistclose=0;var startX=30;var startY=10;var verticalpos="fromtop";var helpWindow=null;var lastSubmenu=null;var lastMenuPathForDebugInfo="";function iecompattest(){return(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body}function get_cookie(a){var b=a+"=";var c="";if(document.cookie.length>0){offset=document.cookie.indexOf(b);if(offset!=-1){offset+=b.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}c=unescape(document.cookie.substring(offset,end))}}return c}function closebar(){if(persistclose){document.cookie="remainclosed=1"}document.getElementById("topbar").style.visibility="hidden"}function checkInt(a){if(a.keyCode<=57||(a.keyCode>=96&&a.keyCode<=105)||a.keyCode==109){return true}if(a.preventDefault!=undefined){a.preventDefault()}else{a.returnValue=false}}function getHTTPObject(){var xmlhttp;
/*@cc_on
	@if (@_jscript_version >= 5)
	  try {
	    xmlhttp = new ActiveXObject('Msxml2.XMLHTTP');
	  } catch (e) {
	    try {
	      xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
	    } catch (E) {
	      xmlhttp = false;
	    }
	  }
	@else
	xmlhttp = false;
	@end @*/
if(!xmlhttp&&typeof XMLHttpRequest!="undefined"){try{xmlhttp=new XMLHttpRequest()}catch(e){xmlhttp=false}}return xmlhttp}var http=getHTTPObject();var isIE=getNavigator();var isCHROME=getNavigator();lastSubmenuName=null;var tableHelpShown=false;var hintTrue=false;function inicializaMenuVertical(){if(stIsIE){$("#navmenu-h li,#navmenu-v li").hover(function(){$(this).addClass("iehover")},function(){$(this).removeClass("iehover")})}}function expirationDaysMessage(a){showError("Su contraseña expirará en "+a+" días")}function getNavigator(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("msie")!=-1)?parseInt(a.split("msie")[1]):false}function handleHttpEncryptResponse(b){var d;if(window.DOMParser){d=function(k){return(new window.DOMParser()).parseFromString(k,"text/xml")}}else{if(typeof window.ActiveXObject!="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")){d=function(k){var m=new window.ActiveXObject("Microsoft.XMLDOM");m.async="false";m.loadXML(k);return m}}else{d=function(){return null}}}var f=d(b);var h=f.documentElement.getElementsByTagName("fieldID")[0].childNodes[0].nodeValue;var j=f.documentElement.getElementsByTagName("option");var a=new Array();for(var c=0;c<j.length;c++){var g=j[c].getElementsByTagName("key")[0];var e=j[c].getElementsByTagName("value")[0];if(e.childNodes.length>0){a[g.childNodes[0].nodeValue]=e.childNodes[0].nodeValue}else{a[g.childNodes[0].nodeValue]=" "}}if(isIE&&isIE<8){fillSelectIE(h,a)}else{fillSelectField(h,a)}if($(document.activeElement).attr("id")==h){$("#"+h).blur();$("#"+h).focus()}}function handleHttpResponse(f){var a=f.documentElement.getElementsByTagName("fieldID")[0].childNodes[0].nodeValue;var b=f.documentElement.getElementsByTagName("option");var g=new Array();for(var d=0;d<b.length;d++){var c=b[d].getElementsByTagName("key")[0];var e=b[d].getElementsByTagName("value")[0];if(e.childNodes.length>0){g[c.childNodes[0].nodeValue]=e.childNodes[0].nodeValue}else{g[c.childNodes[0].nodeValue]=" "}}if(isIE&&isIE<8){fillSelectIE(a,g)}else{fillSelectField(a,g)}}function fillSelectIE(c,a){var f=document.getElementById(c);while(f.hasChildNodes()){f.removeChild(f.firstChild)}var b=isNulleable(f);for(var e in a){var d=document.createElement("option");d.innerHTML=a[e];d.value=e;if(b&&e=="Ninguno"){d.selected=true}f.appendChild(d)}}function ocultarLista(c){if(document.getElementById("dropdowndiv")!=null){if(document.getElementById("dropdowndiv").style.display!="none"){var d=document.all?true:false;if(!d){document.captureEvents(Event.MOUSEMOVE)}var b=0;var a=0;if(d){b=event.clientX+document.body.scrollLeft;a=event.clientY+document.body.scrollTop}else{b=c.pageX;a=c.pageY}if(b<0){b=0}if(a<0){a=0}arriba=document.getElementById("dropdowndiv").offsetTop;izquierda=document.getElementById("dropdowndiv").offsetLeft;ancho=document.getElementById("dropdowndiv").offsetWidth;alto=document.getElementById("dropdowndiv").offsetHeight;if(((b<izquierda)||(b>izquierda+ancho+5))||((a<arriba-50)||(a>arriba+alto))){ocultaOpciones()}}}if(tableHelpShown&&!hintTrue){var b=0;var a=0;if(isIE){b=event.clientX+document.body.scrollLeft;a=event.clientY+document.body.scrollTop}else{b=c.pageX;a=c.pageY}if(b<0){b=0}if(a<0){a=0}arriba=document.getElementById("t1").offsetTop;izquierda=document.getElementById("t1").offsetLeft;ancho=document.getElementById("t1").offsetWidth;alto=document.getElementById("t1").offsetHeight;if(((b<izquierda)||(b>izquierda+ancho))||((a<arriba)||(a>arriba+alto))){closeHelp()}tableHelpShown=false}hintTrue=false}var typedstring="";var aux=new Array();function autofill(d,b){document.getElementById("dropdowndiv").style.display="none";var a=document.getElementById("testinput").value.length;if(b.keyCode==40||b.keyCode==38){updownkeypress(b,aux)}if((b.keyCode==8)||(b.keyCode>=48&&b.keyCode<=57)||(b.keyCode>=65&&b.keyCode<=90)||(b.keyCode>=97&&b.keyCode<=122)){aux=new Array();for(var c=0;c<=codes.length-1;c++){if(codes[c].substring(0,a)==d||codes[c].substring(0,a)==d.toUpperCase()){aux.push(codes[c])}else{document.getElementById("testinput").value=d}}}if(aux.length>1){builddropdown(aux)}}function validarCodigo(b){var c=false;if(b!=""){for(var a=0;a<=codes.length-1;a++){if(codes[a]==b){c=true}}if(c==false){showError("Código invalido.");document.getElementById("testinput").value=""}}else{showError("No se ingresó ningun código.")}return c}var ejecutoEnterEnIrA=0;function mandarForm(a){if(a.keyCode==13){ejecutoEnterEnIrA=1;document.getElementById("dropdowndiv").style.display="none";submitGoButton();return true}}function updownkeypress(c,b){for(var a=0;a<=b.length-1;a++){if(document.getElementById("testinput").value==b[a].substring(0,document.getElementById("testinput").value.length)){if(c.keyCode==40){if(b[a+1]){document.getElementById("testinput").value=b[a+1];return}}if(c.keyCode==38){if(b[a-1]){document.getElementById("testinput").value=b[a-1];return}}}}}function ocultaOpciones(){var a=document.getElementById("dropdowndiv");a.style.display="none"}function mostraOpciones(){var a=document.getElementById("dropdowndiv");a.style.display=""}function setearTextoBarraEstado(a){window.status=a}function borrarTextoBarraEstado(){window.status=""}function builddropdown(b){if(document.getElementById("dropdowndiv").style.display=="none"){document.getElementById("testinput").focus();document.getElementById("dropdowndiv").innerHTML="";document.getElementById("dropdowndiv").style.display="";var a="<dl>";for(var c=0;c<=b.length-1;c++){a+="<dt id="+c+" onclick=sendval(this.id) onmouseover=setcursor(this) >"+b[c]+"</dt>";if(b[c].length>16){document.getElementById("dropdowndiv").style.overflowX="scroll"}}a+="</dl>";document.getElementById("dropdowndiv").innerHTML=a}else{document.getElementById("dropdowndiv").style.display="none"}}function sendval(b){document.getElementById(b).style.backgroundColor="69adf1";var a=b;document.getElementById("dropdowndiv").style.display="none";document.getElementById("testinput").value=codes[a];document.getElementById("botonIrA").focus()}function setcursor(a){for(var b=0;b<=codes.length-1;b++){a.style.cursor="default"}}function fillSelectField(a,f){var e=document.getElementById(a);e.length=0;var c=0;var d=isNulleable(e);if(d){c=1}for(var b in f){if(d&&b=="Ninguno"){e.options[0]=new Option(f[b],b);e.selectedIndex=0}else{e.options[c]=new Option(f[b],b)}c++}}function isNulleable(b){var a=b.getAttribute("nulleable");if(a!=null&&(a==true||a=="true")){return true}return false}function makePOSTRequest(c,d,b,e){var f="";if(CyberBank.encryption.enable){var a=getRandomPassword();d=JSON.stringify(createSecureRequest(d,a));f={parameters:d}}else{f=d}$.ajaxInvoker({type:"POST",url:c,data:f,headers:{"Content-type":"application/x-www-form-urlencoded","X-Cache-ID":b,"Actualize-Field":"false"},async:(e==undefined?true:e)}).done(function(h,k,j){var g=h;if(CyberBank.encryption.enable){g=resolveSecureResponse(h,a);handleHttpEncryptResponse(g)}else{handleHttpResponse(g)}}).always(function(){anularTimeout(timerId);$.hideprogress()})}function encodeCollection(collectionID){try{var collectionData=eval(collectionID+"_data")}catch(e){var collection=document.getElementById(collectionID);var nameLastIndex=collection.previousSibling.text.indexOf("=");var collectionName=collection.previousSibling.text.substring(4,nameLastIndex);eval(collection.previousSibling.text);collectionData=eval(collectionName)}var encodedCollection="";var encodedCollectionSize=0;for(var elementIndex in collectionData){var collectionElement=collectionData[elementIndex];if(collectionElement[1]=="true"){if(encodedCollectionSize>0){encodedCollection=encodedCollection+";"}encodedCollectionSize++;encodedCollection=encodedCollection+collectionElement[0]}}return encodedCollection}function encodeHiddenElemOfForm(d){var f="";var e;if(d.nodeName=="FORM"){e=d}else{e=document.getElementById(d)}var c=$(e).find(":hidden").not("script");for(var b=0;b<c.length;b++){formElement=c[b];formElementValue=formElement.value;formElementName=formElement.name;if((formElementName!="")&&(formElementName!==undefined)){f+=formElementName+"="+encodeURIParams(formElementValue)+"&"}}var a=getDateForGlb();f+="glb_date="+encodeURIParams(a)+"&";f=f.substr(0,(f.length-1));return f}function encodeSecondFactor(a){if(document.getElementById("main_form_modal")!=null){var b=encodeForm(document.getElementById("main_form_modal")).split("&IDContexto");return b[0]}}function documentActiveElement(){var a=document.activeElement;if(a.id=="cyberbankBody"){if(navigator.userAgent.toLowerCase().indexOf("safari/")>-1){if(actionID!=undefined){a=$("#"+actionID)}}}return a}function encodeForm(k){var n="";var q="";var b="";var t="";var e;if(k.nodeName=="FORM"){e=k}else{e=document.getElementById(k)}for(var p=0;p<e.elements.length;p++){t=e.elements[p];q=t.value;b=t.name;formElementId=t.id;b=t.name!=""?t.name:formElementId;if((formElementId!=""||b!="")&&!disabledElement(t)||isDisabledCombo(t)){switch(t.type){case"password":var j=$("#"+formElementId).attr("hasToHash");var r="_PASSWORD_";if(j=="false"){r=""}n+=r+formElementId+"="+encodeURIParams(q)+"&";break;case"text":var h="";if(t.className.indexOf("date-field_")!=-1&&(q!=null&&q!="")){n+=formElementId+"="+encodeURIComponent(encodeDate(q))+"&"}else{if(b.match("^SelectFieldDinamic")&&(q!=null&&q!="")){var d=b.substring(b.indexOf("--",0)+2,b.length);b=b.substring(0,b.indexOf("--",0));n+=formElementId+"="+encodeURIComponent(encodeURIParams(d))+"&"}else{q=$("#"+formElementId).attr("datatype")=="float"?$("#"+formElementId).attr("unmasked"):q;n+=formElementId+"="+encodeURIParams(q)+"&"}}if(b=="captchafield"){n+="captchaValido=true&";n+="captchafield="+encodeURIParams(q)+"&";if((document.getElementById(actionID))&&(document.getElementById(actionID).getAttribute("validationEnable"))&&(document.getElementById(actionID).getAttribute("validationEnable")=="true")){n+="captchaValidationEnable=true&"}}break;case"hidden":if(b=="execute"&&document.getElementById("execute").value!=null&&document.getElementById("execute").value!=""){n+=b+"="+encodeURIParams(document.getElementById("execute").value)+"&";if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var s=$(documentActiveElement()).closest("div[blockContainer='div_section_rep_container']")}else{var s=$(previousFocusedBeforeProcesing).closest("div[blockContainer='div_section_rep_container']")}if(s.length){var u=s.children("[name='hidden_section_rep']");n+=u.attr("id")+"="+encodeURIParams(u.val())+"&"}break}else{if(q!=null&&q.length>0){n+=b+"="+encodeURIParams(q)+"&"}break}case"textarea":n+=formElementId+"="+encodeURIParams(q)+"&";break;case"select-one":var o=t.selectedIndex;if(o>-1){q=t.options[o].value}n+=formElementId+"="+encodeURIParams(q)+"&";break;case"select-multiple":if(b.charAt(0)=="D"){for(var g=0;g<t.options.length;g++){var a=t.options[g];n+=formElementId+"="+encodeURIParams(a.value)+"&"}}else{for(var g=0;g<t.options.length;g++){var a=t.options[g];if(a.selected==true){n+=formElementId+"="+encodeURIParams(a.value)+"&"}}}break;case"checkbox":if(b.match("^bool_field_")){n+=formElementId+"="+encodeURIParams(t.checked)+"&";break}else{if(t.checked){n+=b+"="+encodeURIParams(q)+"&"}else{n+=b+"="+encodeURIParams(-1)+"&"}}break;case"radio":if(selectedRowIDForEventAction!=null&&b.indexOf(actionID.substring(0,actionID.indexOf("_")))>-1){break}if((b=="radiobuttonField")||(b==formElementId.substring(0,formElementId.lastIndexOf("_opt_")))){if(t.checked){n+=formElementId+"="+encodeURIParams(q)+"&"}}else{if(t.checked){n+=b+"="+encodeURIParams(q)+"&"}else{n+=b+"="+encodeURIParams(-1)+"&"}}break}}}var m=getDateForGlb();n+="glb_date="+encodeURIParams(m)+"&";var c=document.getElementsByClassName("doble-list-selector");if(c!=null){for(var f=0;f<c.length;f++){n+="hasDobleListSelector="+encodeURIParams(c[f].id)+"&"}}if(selectedRowIDForEventAction!=null){n+="selectedRowIDForEventAction="+encodeURIParams(selectedRowIDForEventAction)+"&";selectedRowIDForEventAction=null}n=n.substr(0,(n.length-1));if(document.getElementById("solapa-second-factor")!=null){if(n.indexOf("tab=")==-1){n=n+"&tab="+document.getElementById("tab").value}}return n}function encodeFormSelectField(){var g="";var d="";var e="";var c="";var f;f=getDocumentForm();for(var b=0;b<f.elements.length;b++){c=f.elements[b];d=c.value;e=c.name;formElementId=c.id;if(formElementId!=""&&!disabledElement(c)||isDisabledCombo(c)){switch(c.type){case"select-one":var a=c.selectedIndex;if(a>-1){d=c.options[a].value}g+=formElementId+"="+encodeURIParams(d)+"&";break}}}g=g.substr(0,(g.length-1));return g}function isDisabledCombo(a){return function(){if(a.name!=""&&a.className=="select-field_NO_EDITABLE"){return true}else{return false}}()}function disabledElement(a){if(isIE&&isIE<8){if(a.outerHTML!=null){if(a.outerHTML.indexOf("disabled")!=-1||$("#"+a.id).attr("readonly")!==undefined){return true}}return false}if(a.attributes!=null){if(a.attributes.disabled!=null||a.attributes.readOnly!=null){return true}}return false}function encodeDate(f){var a="";var d="yyyyMMddHHmmss";var e=f.split("/");for(var c=e.length-1;c>=0;c--){a+=e[c]}var g=a.length;for(var b=g;b<d.length;b++){a+="0"}return a}function updateDependentFields(c){window.status=traducir("Ejecutando...");if(procesando==false){setProcesando(true);timerId=window.setTimeout("setProcesando(false)",7000)}var b=encodeForm(getDocumentIDForm());for(var a=0;a<c.length;a++){makePOSTRequest("index",b,c[a])}}function clearField(c){for(var b=0;b<c.length;b++){var a=$("#"+c[b]);if(a.length){if(!isIE&&a[0].options!=null){a[0].options.length=0}a.selectedIndex=-1}}}function showSubMenu(b){if(b!=null){closeCalendars();lastSubmenu=b;hideContainer();collapseAllMenus();var a=document.getElementById(b);a.style.display=""}}function collapseAllMenus(){hideContainer();var a=document.getElementById("main_workarea");if(a!=null){for(var b=0;b<a.childNodes.length;b++){element=a.childNodes[b];if(element.className=="submenucontainer"){element.style.display="none"}}}}function hideContainer(){var a=document.getElementById("container");a.style.display="none"}function cleanValueSpaces(a){if(typeof a.replace=="function"){return a.replace(/^\s+/,"").replace(/\s+$/,"")}else{return a}}function retrieveFormElement(b,a){if(b.elementWrapper==true){return b.elements[a].get(0)}return b.elements[a]}function validateWithTabs(a){return(($("#tab").length>0&&$("#tab").val()!=""&&$("#solapa-"+$("#tab").val()).find(a).length>0)||(($("#tab").length==0||$("#tab").val()=="")&&($(".container-tab-component").find(a).length==0)))}function validateSecondFactor(){if(document.getElementById("second-factor")!=null&&document.getElementById("main_form_modal")!=null){return validateForm(document.getElementById("main_form_modal"))}else{return true}}function validateForm(V){var o="";var a="false";var w="false";$(".error").removeClass("error");var b=true;var M=V.id!="main_form"&&V.id!="main_form_modal"?$.grep($(V.elements),function(u){return $(u).attr("name")=="radioButtonContainer"}):$('[name="radioButtonContainer"]');for(var O=0;O<M.length;O++){var D=M[O];if(!($(D).is(":hidden"))&&$(D).attr("required")=="required"){var N=$(D).find("input");var K=false;for(var U=0;U<N.length;U++){K=K||$(N[U]).is(":radio")&&$(N[U]).is(":checked")}if(!K){b=false;var p=D;if($(p).attr("validationMessage")!=null){o=setErrorMessage(o,D[0]==null?D:D[0],$(p).attr("validationMessage")+"\n")}else{o=setErrorMessage(o,D[0]==null?D:D[0],traducir("Debe seleccionar una opcion de ")+$(D).attr("caption")+"\n")}}}}for(var U=0;U<V.elements.length;U++){var Q="";formElement=retrieveFormElement(V,U);if($(formElement).is(":hidden")){continue}if(validateWithTabs("#"+formElement.getAttribute("id"))){switch(formElement.type){case"text":case"hidden":case"password":case"radio":case"checkbox":case"textarea":Q=formElement.value;var c=$(formElement).attr("notTrimString");if(formElement.type!="password"&&c!="true"){Q=cleanValueSpaces(Q);formElement.value=Q}break;case"select-one":var v=formElement.selectedIndex;if(v>-1){Q=formElement.options[v].value}break;default:continue}if(formElement.type=="text"&&isIntField(formElement.id)){Q=formElement.value;if((Q>2147483647)||(Q<-2147483648)){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("sobrepasa el maximo permitido para el tipo de dato.")+" \n")}}var I;if(formElement.type=="select-one"){I=(Q=="Ninguno"||Q=="")}else{I=Q==""}var q=formElement.hasAttribute("required")&&$(formElement).closest(".hiddenSection").length==0&&I;if(q&&!(formElement.id==="undefined")&&formElement.id.indexOf("extraField_")>=0){var H=document.getElementById(formElement.getAttribute("dependant"));q=q&&H.checked}if(q){b=false;if(formElement.hasAttribute("validationMessage")){o=setErrorMessage(o,formElement,formElement.getAttribute("validationMessage")+"\n")}else{o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("es obligatorio")+"\n")}document.getElementById(formElement.id).focus()}if((formElement.readOnly==undefined)||(!I&&formElement.readOnly!=true)){if(formElement.getAttribute("name")!=null){if(formElement.getAttribute("name").indexOf("TIME_HR")!=-1){CyberBank.validator.addTimeComponent(formElement.getAttribute("idgroup"),formElement.getAttribute("caption"),Q);if((!isNaN(Q))&&(Number(Q)>23||Number(Q)<0)){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("Hora invalida")+"\n");document.getElementById(formElement.id).focus()}else{error=validateTimeConstrain(formElement,"TIME_HR");if(error!=""){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+error+"\n");document.getElementById(formElement.id).focus()}}}if(formElement.getAttribute("name").indexOf("TIME_MIN")!=-1){CyberBank.validator.addTimeComponent(formElement.getAttribute("idgroup"),formElement.getAttribute("caption"),Q);if((!isNaN(Q))&&(Number(Q)>59||Number(Q)<0)){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" Minutos inválidos\n");document.getElementById(formElement.id).focus()}}}if(isFloatField(formElement.id)){var X=formElement.getAttribute("unmasked");Q=X.replace(/\./g,",")}if(isNumeric(formElement.id)){Q=CB.automask.getUnformattedNumberForValidation(Q)}if(formElement.getAttribute("rangemin")!=null){var A=formElement.getAttribute("rangemin");var T=Number(A);if(!isNaN(Q)&&!isNaN(A)){if((T>Number(Q))){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("es inferior al minimo (")+T+")\n");document.getElementById(formElement.id).focus()}}else{if((A>Q)){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("es inferior al minimo (")+A+")\n");document.getElementById(formElement.id).focus()}}}if(formElement.getAttribute("rangemax")!=null){var R=formElement.getAttribute("rangemax");var y=Number(R);if(!isNaN(Q)&&!isNaN(R)){if(y<Number(Q)){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("excede el maximo (")+y+")\n");document.getElementById(formElement.id).focus()}}else{if(R<Q){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("excede el maximo (")+R+")\n");document.getElementById(formElement.id).focus()}}}var g=null;try{if(formElement.getAttribute("regex")!=null){g=new RegExp(formElement.getAttribute("regex"))}}catch(W){g=null}var J=formElement.getAttribute("regexDesc");if(formElement.getAttribute("checkfloat")!=null&&formElement.getAttribute("checkfloat")!=""){if(g==null){g=/^(\ +|-)?\d{0,15}[[.,]?\d{0,13}]?$/;if(J==null){J=" "+traducir("El numero debe tener como maximo 15 enteros y 13 decimales.")}else{J+=" "+traducir("El numero debe tener como maximo 15 enteros y 13 decimales.")}}if(!g.test(Q)){b=false;document.getElementById(formElement.id).focus();if(J==null){o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser un numero")+"\n")}else{o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+J+"\n")}}else{var r=Q.replace(/,/,".");if(r.indexOf(",")>0||isNaN(r)){if(formElement.getAttribute("checkfloat")=="doCheck"){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("numero mal formado.")+" \n")}}}}else{if(formElement.getAttribute("checkint")!=null){if(g==null){g=/^(\ +|-)?[0-9]+$/}if(!g.test(Q)){b=false;document.getElementById(formElement.id).focus();if(J==null){o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser un numero entero")+"\n")}else{o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+J+"\n")}}}else{if(formElement.getAttribute("checkdate")!=null){var C=formElement.getAttribute("dateformat");if(!isDate(Q,C)){b=false;document.getElementById(formElement.id).focus();o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha valida (dd/mm/yyyy)")+"\n")}else{var h=Q.split("/");h=new Date(h[2],Number(h[1])-1,h[0]);var t=formElement.getAttribute("rest");var F=formElement.getAttribute("resb");if(t!=null){if(t=="entre"){var m=formElement.getAttribute("down");var L=formElement.getAttribute("top");var E=null;var aa=null;var P="";var G="";if(F=="idRadio"){var B=m;m=null;if(B!=null){E=document.getElementById(B);if(E!=null){m=E.value;P=E.getAttribute("caption")}}var Z=L;L=null;if(Z!=null){aa=document.getElementById(Z);if(aa!=null){L=aa.value;G=aa.getAttribute("caption")}}if(m==null||L==null){b=false;o=setErrorMessage(o,formElement,traducir("El elemento")+" "+formElement.getAttribute("caption")+" "+traducir("debe estar entre los valores correspondientes a los campos")+" "+P+" "+traducir("y")+" "+G+" "+traducir("los cuales son invalidos.")+"\n")}}if(m!=null){P=m;m=m.split("/");m=new Date(m[2],Number(m[1])-1,m[0]);if(h<m){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha mayor a")+" "+P+"\n")}}if(L!=null){topDateString=L;L=L.split("/");L=new Date(L[2],Number(L[1])-1,L[0]);if(h>L){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha menor a")+" "+topDateString+"\n")}}}else{date=formElement.getAttribute("date");if(F=="idRadio"){var f=date;date=null;if(f!=null){var n=document.getElementById(f);if(n!=null){date=n.value}if(date==null){b=false;o=setErrorMessage(o,formElement,traducir("El elemento")+" "+formElement.getAttribute("caption")+" "+traducir("se debe comparar contra el campo")+" "+n.getAttribute("caption")+" "+traducir("el cual es invalido.")+"\n")}}}var j=date;date=date.split("/");date=new Date(date[2],Number(date[1])-1,date[0]);typ=t;if(typ=="less"){if(h>=date){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha menor a")+" "+j+"\n")}}if(typ=="lessOrEqual"){if(h>date){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha menor o igual a")+" "+j+"\n")}}if(typ=="more"){if(h<=date){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha mayor a")+" "+j+"\n")}}if(typ=="moreOrEqual"){if(h<date){b=false;o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("debe ser una fecha mayor o igual a")+" "+j+"\n")}}}}}}else{if(g!=null){var z=true;if(!(formElement.id==="undefined")&&formElement.id.indexOf("extraField_")>=0){var H=document.getElementById(formElement.getAttribute("dependant"));z=z&&H.checked}if(z&&!g.test(Q)){b=false;document.getElementById(formElement.id).focus();if(J==null){o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+traducir("tiene un formato incorrecto")+"\n")}else{o=setErrorMessage(o,formElement,formElement.getAttribute("caption")+" "+J+"\n")}}}}}}}}}if(document.getElementById("avatarIsNotNull")!=null&&document.getElementById("avatarIsNotNull").value){var k=document.getElementById("currentImg").src;var d=k.split("/");if(d[d.length-1]=="default.png"){b=false;o=traducir("Debe seleccionar un avatar")}}if(document.getElementById("second-factor")!=null&&document.getElementById("main_form_modal")!=null){var s=document.getElementById("main_form_modal");for(var U=0;U<s.elements.length;U++){var Q="";var Y=retrieveFormElement(s,U);var S=Y.hasAttribute("required");if(S&&Y.value==""){b=false;if(Y.hasAttribute("validationMessage")){o=setErrorMessage(o,Y,Y.getAttribute("validationMessage")+"\n")}else{o=setErrorMessage(o,Y,Y.getAttribute("caption")+" "+traducir("es obligatorio")+"\n")}document.getElementById(formElement.id).focus()}}}if(CyberBank.validator.validateHourFieldsConsistency()){b=false;o+=CyberBank.validator.getErrors()}if(!b){showError(o)}return b}function setErrorMessage(a,b,c){idGroup=$("#"+b.id).attr("idgroup");if(idGroup){$("#label_"+idGroup).addClass("error")}else{$("#label_"+b.id).addClass("error")}$("#"+b.id).addClass("error");return a+c}function showError(b){$("#errorPanelCollection").hide();var a=buildErrorMessage(b);if($("#errorPanelModal").val()=="true"){modalError.alert(a)}else{showErrorPanel(a,false)}}function showTimeoutError(a){showErrorPanel(a,true)}function buildErrorMessage(d){var a=d.split("\n");var c='<p tabindex="0"; class="error-panel_title">'+traducir("Lo sentimos. Han ocurrido errores en el ingreso de datos:")+'</p><br><ul tabindex="0"; class="error-panel_list">';for(var b=0;b<a.length;b++){if(a[b].length==0){continue}else{c+="<li>"+a[b]+"</li>"}}c=c+'</ul><textarea id="textoDiv" rows="4" cols="50"></textarea>';return c}function showErrorPanel(e,d){var b="#errorPanel";if($("#modalErrorPanel").length>0){b="#modalErrorPanel";d=true}else{if($("#errorPanelLogin_name").length>0){b="#errorPanelLogin_name"}else{if($("#errorPanelLogin_password").length>0){b="#errorPanelLogin_password"}else{if($("#errorPanelAutoAdhesion").length>0){b="#errorPanelAutoAdhesion";d=true}else{if($("#errorPanelAuthentication").length>0){b="#errorPanelAuthentication";d=true}else{$(b).html(e)}}}}}if(d==true){$(b).html(e)}$(b).fadeIn(800);$(window).scrollTop(0);var c=document.createElement("div");c.innerHTML=e;var a=c.textContent||c.innerText||"";if($("#textoDiv")!=null){$("#textoDiv").val(a);$("#textoDiv").focus();$("#textoDiv").hide()}}function hideErrorPanel(){var a="#errorPanel";$(a).hide();$("#errorModalCollection").remove();$("#errorPanelCollection").remove()}function showUploadError(b){var a="#uploadError";$(a).html(b);$(a).fadeIn(800)}function hideUploadError(){var a="#uploadError";$(a).html("");$(a).fadeOut(800)}function validateTimeConstrain(h,n){var o="";var s=parseInt(h.value);var c=h.getAttribute("rest");var r=h.getAttribute("resb");if(c!=null){if(c=="entre"){var p=h.getAttribute("down");var q=h.getAttribute("top");var a=null;var m=null;var f="";var k="";if(r=="idRadio"){var b=p;p=null;if(b!=null){a=document.getElementById(b+n);if(a!=null){p=a.value;f=a.getAttribute("caption")}}var j=q;q=null;if(j!=null){m=document.getElementById(j+n);if(m!=null){q=m.value;k=m.getAttribute("caption")}}if(p==null||q==null){isValid=false;o=o+traducir("El elemento")+" "+h.getAttribute("caption")+" "+traducir("debe estar entre los valores correspondientes a los campos")+" "+f+" "+traducir("y")+" "+k+" "+traducir("los cuales son invalidos.")+"\n"}}else{if(n=="TIME_HR"){p=p.split(":")[0];q=q.split(":")[0]}else{p=p.split(":")[1];q=q.split(":")[1]}}if(p!=null){p=parseInt(p);if(s<p){isValid=false;o=o+h.getAttribute("caption")+" "+traducir("debe ser una hora mayor a")+" "+f+"\n"}}if(q!=null){q=parseInt(q);if(s>q){isValid=false;o=o+h.getAttribute("caption")+" "+traducir("debe ser una hora menor a")+" "+k+"\n"}}}else{date=h.getAttribute("date");if(r=="idRadio"){var d=date;date=null;if(d!=null){var g=document.getElementById(d+n);if(g!=null){date=g.value}}if(date==null){isValid=false;o=o+traducir("El elemento")+" "+h.getAttribute("caption")+" "+traducir("se debe comparar contra el campo")+" "+g.getAttribute("caption")+" "+traducir("el cual es invalido.")+"\n"}}var e=date;typ=c;date=parseInt(date);if(typ=="less"){if(s>=date){isValid=false;o=o+h.getAttribute("caption")+" "+traducir("debe ser una hora menor a")+" "+e+"\n"}}if(typ=="lessOrEqual"){if(s>date){isValid=false;o=o+h.getAttribute("caption")+" "+traducir("debe ser una hora menor o igual a")+" "+e+"\n"}}if(typ=="more"){if(s<=date){isValid=false;o=o+h.getAttribute("caption")+" "+traducir("debe ser una hora mayor a")+" "+e+"\n"}}if(typ=="moreOrEqual"){if(s<date){isValid=false;o=o+h.getAttribute("caption")+" "+traducir("debe ser una hora mayor o igual a")+" "+e+"\n"}}}}return o}var procesando=false;var timerId=0;function anularTimeout(a){setProcesando(false);window.clearTimeout(a)}function setProcesando(a){procesando=a}var formID;var actionID;var validate=false;var selectedRowIDForEventAction;var executionUUID="";function setVariables(a,b,c){formID=a;actionID=b;validate=c;if($("#main_form_modal").length>0){executionUUID=$("#main_form_modal > #uuid_ajax").val()}else{executionUUID=$("#main_form > #uuid_ajax").val()}updateActualFocus(b)}function setVariables(a,b,c,d){formID=a;actionID=b;validate=c;selectedRowIDForEventAction=d;updateActualFocus(b);if($("#main_form_modal").length>0){executionUUID=$("#main_form_modal > #uuid_ajax").val()}else{executionUUID=$("#main_form > #uuid_ajax").val()}}function mostrarEnEjecucion(){$.showprogress()}function setTabSeleccionado(b){$("table[id^='tabComponent']").each(function(){$(this).eq(0).find("tr td span button").each(function(){$(this).attr("seleccionado","false");$(this).attr("currentTab","false");var c=$(this).find("p").text()+". Pestaña inactiva.";$(this).attr("aria-label",c)})});if(b){$("#"+b).attr("seleccionado","true");$("#"+b).attr("currentTab","true");var a=$("#"+b).find("p").text()+". Pestaña activa.";$("#"+b).attr("aria-label",a);$("input[id='tab']").each(function(){$(this).val(b)})}}function unsetTabSeleccionado(){}var container2Draw;function callSubmit(a){setTimeout(function(){container2Draw=a;submitFormByAjax(formID,actionID,validate)},100)}var ruleServiceInvalidation=false;function submitFormByAjax(b,d,k){if(!isValidInvocation(d)){return}if(ruleServiceInvalidation){ruleServiceInvalidation=false;$.hideprogress();return false}preProcessingSubmit();if(d!="autoLoad"){hideErrorPanel()}window.status=traducir("Ejecutando...");closeCalendars();if(procesando==false){setProcesando(true);timerId=window.setTimeout("setProcesando(false)",7000)}else{$.hideprogress();return}var a=true;var c=document.getElementById(d);if(c!=null){if(c.getAttribute("selectionmode")!="0"){if(c.getAttribute("colsToValidate")!=null){if(!validateCollections(c.getAttribute("colsToValidate"))){anularTimeout(timerId);$.hideprogress();return}}}if(c.className.indexOf("action-button")!=-1){if($("#"+c.id).text()==traducir("Salir")||$("#"+c.id).text()==traducir("Finalizar")||$("#"+c.id).text()==traducir("Cancelar")){k=false}closeCalendars()}if(c.getAttribute("validationEnable")=="false"){k=false}if(c.getAttribute("mapToContext")=="false"){a=false}}var o=null;try{o=getValidationElems(c.id,b)}catch(j){k=false}if((!k||(validateForm(o))&&validateSecondFactor())){document.getElementById("execute").value=d;if(container2Draw&&(undefined!=container2Draw)&&(container2Draw.indexOf("secondFactorContainer")!=-1)){setContainer2Draw("secondFactorContainer")}var m="";if(a){m=encodeForm(b)+"&"+encodeSecondFactor(m)}else{m=encodeHiddenElemOfForm(b)}$("#modalWindow").jqmHide();updateAllHiddenColumns();var h="";if(CyberBank.encryption.enable){var n=getRandomPassword();m=JSON.stringify(createSecureRequest(m,n));h={parameters:m}}else{h=m}$.ajaxInvoker({type:"POST",url:"index",data:h,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8","Get-Form":"true"},async:false}).done(function(e,q,p){submitFormByAjax_DoneLogic(e,n)}).fail(function(e,q,p){submitFormByAjax_FailLogic(e,q,p,n)}).always(function(){container2Draw=null;showModalWindow()})}else{$.hideprogress();anularTimeout(timerId);clearTabComponent()}window.status="";if($($("form#main_form #errorPanelCollection p"))!=null&&$($("form#main_form #errorPanelCollection p")).length>0){if($("#textoError").length==0){var g=$($("form#main_form #errorPanelCollection p")[0]).text();$("#errorPanelCollection").append('<textarea id="textoError" autofocus tabindex="0" rows="4" cols="50"></textarea>');$("#textoError").val(g);$("#textoError").focus();$("#textoError").hide()}else{if($("#textoError").length>0){$("#textoError").focus();$("#textoError").hide()}}}if($(".msg-error")!=null&&$(".msg-error").length>0){if($("#error").length==0){var f=$(".msg-error").text();$(".msg-error").append('<textarea id="error" autofocus tabindex="0" rows="4" cols="50"></textarea>');$("#error").val(f);$("#error").focus();$("#error").hide()}else{if($("#error").length>0){$("#error").focus();$("#error").hide()}}}}function submitFormByAjax_DoneLogic(f,m){var a=f;if(CyberBank.encryption.enable){a=resolveSecureResponse(f,m)}if(successLogin(a)){$("#seleccion").val("successLogin");$("#loginForm").submit();return}else{if(container2Draw&&undefined!=container2Draw){if(trim(a)=="logout"){doLogout();return true}if((container2Draw.indexOf("solapa")!=-1)&&(container2Draw.indexOf("secondFactorContainer")==-1)){var c=searhTabSelected();var b="";if(c){c.parent().parent().parent().parent().parent().find($("div[id^='solapa-']"));b=c.attr("id");var k=$("#solapa");if(k){$("#solapa").attr("id","solapa-"+b)}c.parent().parent().parent().parent().parent().find($("div[id^='solapa-']")).attr("id","solapa-"+b)}container2Draw="solapa-"+b;var g=$("#"+container2Draw);$(g).html(getResponseTextInTab(a,g.attr("id")));var d=$("#"+container2Draw+" input[name='uuid']").val();$("input[name='uuid']").val(d);clearTabComponent()}else{if(container2Draw.indexOf("secondFactorContainer")!=-1){$("div > #secondFactorContainer").each(function(){if(a.indexOf("secondFactorContainer")!=-1&&$("#modalWindow").length){var n=$("<div>").html(a);var o=n.find("form").html();n.find("form").after(o);n.find("form").remove();a=n.html();$(this).html(getResponseText(a))}if($(this).is(":visible")){$(this).html(getResponseText(a))}secondFactorLoading=false});setContainer2Draw("secondFactorContainer")}else{var g=$("#"+container2Draw);$(g).html(getResponseText(a));setContainer2Draw("")}}}else{if(trim(a)=="logout"){doLogout()}else{try{$("#container").html(getResponseText(a));reloadWidgets()}catch(e){console.log("submitFormByAjax - ERROR:  "+e.message)}}}}anularTimeout(timerId);if(document.getElementById("newUser")!=null){if(document.getElementById("newUser").value=="false"){document.getElementById("login").innerHTML=a;fillUuid();return}}var j=$(a).find("#captchaValido");var h=false;if(j!=null){if((j!=undefined)&&(j.length>0)){h=j[0].value}}if(h=="false"){showError(traducir("Campo de validacion invalido."));fillUuid()}else{if(!cargarPagina(a,false)){fillUuidByResponse(null);showSubMenu(lastSubmenu)}else{fillUuid()}}CyberBank.utils.resetButtonCursors();hideAllColumns();validateAllMaxColumnFilter();if(!secondFactorLoading){$.hideprogress()}cargarDocumentReady()}function submitFormByAjax_FailLogic(c,f,e,a){if(CyberBank.encryption.enable){if(typeof c==="string"){c=$.parseJSON(c)}handleTokens(c);var b=resolveSecureResponse(c,a)}var d=getExtraDataOnFail(c,f,e);displayTimeoutError(d);$.hideprogress()}function displayTimeoutError(a){if($("#loginForm").length>0){showTimeoutError(traducir("No se puede establecer conexion con el Servidor")+a);cleanUuid()}else{showTimeoutError(traducir("No se puede establecer conexion con el Servidor")+a);if($("#errorPanel").length>0){var b=$("#errorPanel").css({"margin-bottom":"400px"});$("#container").html("").append(b)}}}function getTimeoutError(b){var a='<p class="error-panel_title">'+b+"</p><br>";a+="<p><a href=\"javascript:submitSubmenuByAjax('massiveSelectCustomerOperationSeleccionConsolidadaFramework');\">Ir al inicio</a></p>";return a}function validateCollections(d){var c=d.split(",");var e=null;var a=null;for(var b in c){e=c[b];a=document.getElementById(e);if(a!=undefined&&!isChecked(a)){return false}}return true}function isChecked(a){var c=a.tBodies[0].rows.length;if(c==0){showError(traducir("No hay elementos para ejecutar la operacion"));return false}for(var b=0;b<c;b++){if(a.tBodies[0].rows[b].cells[0].firstChild==null){continue}if(a.tBodies[0].rows[b].cells[0].firstChild.checked){return true}}showError(traducir("Debe seleccionar un elemento"));return false}function fillUuidByResponse(b){if(b!=null){var a=document.getElementById("uuid");var c=b.getElementsByTagName("input")[0];a.value=c.attributes[3].nodeValue}}function cleanUuid(){var a=document.getElementById("uuid");var b=document.getElementById("uuid_ajax");a.value="";b.value=""}function fillUuid(){var a=document.getElementById("uuid");var b=document.getElementById("uuid_ajax");a.value=b.value}function setUidForJsp(a){var b=document.getElementById("uuid_ajax");b.value=a;uold.value=b.value}function submitGoButton(){var e="";var d="";var b;var c=document.getElementById("testinput");setearTextoBarraEstado(traducir("Cargando item seleccionado:")+" "+c.value);if(validarCodigo(c.value)||c.value!=""){d=document.getElementById("uuid");e+=d.name+"="+encodeURIParams(d.value)+"&";e+=c.name+"="+encodeURIComponent(c.value)+"&";e=e.substr(0,(e.length-1));cleanMarketing();var f="";if(CyberBank.encryption.enable){var a=getRandomPassword();e=JSON.stringify(createSecureRequest(e,a));f={parameters:e}}else{f=e}$.ajaxInvoker({type:"POST",url:"index",data:f,headers:{"Content-Type":"application/x-www-form-urlencoded","Code-Alias":c.value},async:false}).done(function(h,k,j){var g=h;if(CyberBank.encryption.enable){g=resolveSecureResponse(h,a)}hideContainer();cargarPrimerLayout(g,"");fillUuid();borrarTextoBarraEstado();loadMarketing()}).always(function(){document.getElementById("dropdowndiv").style.display="none"})}}function submitPendingTrxs(e){var c="";var b="";b=document.getElementById("uuid");c+="seleccion="+encodeURIComponent(e)+"&";c+=b.name+"="+encodeURIParams(b.value)+"&";c=c.substr(0,(c.length-1));var d="";if(CyberBank.encryption.enable){var a=getRandomPassword();c=JSON.stringify(createSecureRequest(c,a));d={parameters:c}}else{d=c}$.ajaxInvoker({type:"POST",url:"index",data:d,headers:{"Content-Type":"application/x-www-form-urlencoded","Get-Form":"true"},async:false}).done(function(g,j,h){var f=g;if(CyberBank.encryption.enable){f=resolveSecureResponse(g,a)}hideContainer();cargarPrimerLayout(f,"");fillUuid()}).always(function(){})}var seleccionado;function submitSubmenuByAjax(a){submitSubmenuByAjax(a,null,null)}function submitSubmenuByAjax(f,g,c){cleanMarketing();executePreConditionWhenOpenWorkflow();var e="";var b="";e+="seleccion="+encodeURIParams(f)+"&";e+="menuId="+encodeURIParams(g)+"&";e+="path="+encodeURIParams(c)+"&";b=document.getElementById("uuid");e+=b.name+"="+encodeURIParams(b.value)+"&";b=document.getElementById("IDContexto");if(b!=null){e+=b.name+"="+encodeURIParams(b.value)+"&"}e=e.substr(0,(e.length-1));$("#modalWindow").jqmHide();var d="";if(CyberBank.encryption.enable){var a=getRandomPassword();e=JSON.stringify(createSecureRequest(e,a));d={parameters:e}}else{d=e}$.ajaxInvoker({type:"POST",url:"index",data:d,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8","Get-Form":"true"},async:true,beforeSend:function(){$.showprogress()}}).done(function(m,o,n){var k=m;if(CyberBank.encryption.enable){k=resolveSecureResponse(m,a)}if(trim(k)!="logout"){hideContainer();widgetAsyncIds.length=0;cargarPrimerLayout(k,f);validateAllMaxColumnFilter();fillUuid();CyberBank.utils.resetButtonCursors();showModalWindow();reloadWidgets();loadMarketing();if($($("form#main_form #errorPanelCollection p"))!=null&&$($("form#main_form #errorPanelCollection p")).length>0){if($("#textoError").length==0){var j=$($("form#main_form #errorPanelCollection p")[0]).text();$("#errorPanelCollection").append('<textarea id="textoError" autofocus tabindex="0" rows="4" cols="50"></textarea>');$("#textoError").val(j);$("#textoError").focus();$("#textoError").hide()}else{if($("#textoError").length>0){$("#textoError").focus();$("#textoError").hide()}}}if($(".msg-error")!=null&&$(".msg-error").length>0){if($("#error").length==0){var h=$(".msg-error").text();$(".msg-error").append('<textarea id="error" autofocus tabindex="0" rows="4" cols="50"></textarea>');$("#error").val(h);$("#error").focus();$("#error").hide()}else{if($("#error").length>0){$("#error").focus();$("#error").hide()}}}}else{if(trim(k)=="logout"){doLogout()}}}).fail(function(j,m,k){var h=getExtraDataOnFail(j,m,k);showError(traducir("No se puede establecer conexion con el Servidor")+h)}).always(function(){$.hideprogress()})}function loadMarketing(){if(document.getElementById("epExist")!=null&&document.getElementById("epExist").value=="true"){var c=getHTTPObject();var a="";var b="";b=document.getElementById("uuid");a+=b.name+"="+encodeURIParams(b.value)+"&";a+="campania=true&mode=load";c.open("POST","index",true);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.setRequestHeader("Get-Form","true");try{c.send(a)}catch(d){showError(traducir("Fallo actualizacion marketing. No se puede establecer conexion con el Servidor"))}c.onreadystatechange=function(){if(c.readyState==4&&c.status==200){if(c.responseText!=""){contents=c.responseText.split("<DIFERENTE_CONTENIDO>");for(var e=0;e<contents.length;e++){var g=contents[e].split("<SEPARANDO_CONTENIDO>");var f=document.getElementById(g[0]+"Content");if(f!=null){f.innerHTML=g[1]}}}}}}}function cleanMarketing(){if(document.getElementById("epExist")!=null&&document.getElementById("epExist").value=="true"){var f=getHTTPObject();var a="";var d="";d=document.getElementById("uuid");a+=d.name+"="+encodeURIParams(d.value)+"&";a+="campania=true&mode=clean";f.open("POST","index",false);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.setRequestHeader("Get-Form","true");try{f.send(a)}catch(g){showError(traducir("Fallo actualizacion marketing. No se puede establecer conexion con el Servidor"))}if(f.readyState==4){if(f.responseText!=""){slots=f.responseText.replace("\r","").replace("\n","").split("<SEPARANDO_CONTENIDO>");for(var c=0;c<slots.length;c++){if(slots[c]!=""){var b=(slots[c]+"Content");if(document.getElementById(b)!=null){document.getElementById(b).innerHTML=""}}}}}}}function removeBr(b){var c;if(isIE&&isIE<8){c=b.split("<BR>")}else{c=b.split("<br>")}var d="";for(var a in c){d+=c[a]}return d}function cargarPagina(k,a){clearTabComponent();if(k.indexOf("main_form_modal")!=-1){checkAndLoadIfSecondFactorPresent();return true}if(a==true){try{$("#container").html(k)}catch(f){console.log("cargarPagina - ERROR - "+f.message)}}var j=false;var b=document.getElementById("main_form");if(b==null){return false}drawDefaultCssTabs();var d=searhTabSelected();if((!d||a==true)&&!isDrawInTab()){var g=searchIsDefaultTabPresent();if(g){var c=g.attr("id");var m=$("#solapa");if(m){$("#solapa").attr("id","solapa-"+c)}$("div[id^='solapa-']").attr("id","solapa-"+c);setTimeout(function(){$("#"+c).click()},10)}}drawHoverComponent(d);try{if($($("form#main_form #errorPanelCollection p"))==null||$($("form#main_form #errorPanelCollection p")).length==0){document.getElementById(document.getElementById("focus").getAttribute("id_elem")).focus()}}catch(h){}checkAndLoadIfSecondFactorPresent();return true}function cargarJsFromAjax(d){var b=d;var a;while(a=b.match(/(<script[^>]+javascript[^>]+>\s*(<!--)?)/i)){b=b.substr(b.indexOf(RegExp.$1)+RegExp.$1.length);if(!(endscript=b.match(/((-->)?\s*<\/script>)/))){break}block=b.substr(0,b.indexOf(RegExp.$1));b=b.substring(block.length+RegExp.$1.length);var c=document.createElement("script");c.text=block;document.getElementsByTagName("head").item(0).appendChild(c)}}function cargarPrimerLayout(a,f,b){try{$("#container").html(a);setTimeout(reloadAsyncWidgets,100)}catch(c){console.log("cargarPrimerLayout - ERROR: "+c.message)}cargarPagina(a,false);showContainer();cargarDocumentReady();checkAndLoadIfSecondFactorPresent();try{if($($("form#main_form #errorPanelCollection p"))==null||$($("form#main_form #errorPanelCollection p")).length==0){document.getElementById(document.getElementById("focus").getAttribute("id_elem")).focus()}}catch(d){}}function showContainer(){document.getElementById("container").style.display=""}function fillSeleccion(a,b){a.seleccion.value=b;submitFormByAjax(a,b,false)}function doSort(c,a,e){var d=document.getElementById(c);var b=parseInt(d.getAttribute("pagenumber"));submitSort(c,a,b,e)}function modifyCollImages(h,a,g,c,e){if(document.getElementById("gview_"+e)==null){var d=document.getElementById("imagesPath").value;if($("#"+e+"_colImFirstPage").length>0){if(h){document.getElementById(e+"_colImFirstPage").src=d+"ImFirstPage.png";document.getElementById(e+"_colImFirstPage").parentElement.setAttribute("activo",true)}else{document.getElementById(e+"_colImFirstPage").src=d+"ImFirstPage_Dis.png";document.getElementById(e+"_colImFirstPage").parentElement.setAttribute("activo",false)}}if($("#"+e+"_colImPrevPage").length>0){if(a){document.getElementById(e+"_colImPrevPage").src=d+"ImPrevPage.png";document.getElementById(e+"_colImPrevPage").parentElement.setAttribute("activo",true)}else{document.getElementById(e+"_colImPrevPage").src=d+"ImPrevPage_Dis.png";document.getElementById(e+"_colImPrevPage").parentElement.setAttribute("activo",false)}}if($("#"+e+"_colImNextPage").length>0){if(g){document.getElementById(e+"_colImNextPage").src=d+"ImNextPage.png";document.getElementById(e+"_colImNextPage").parentElement.setAttribute("activo",true)}else{document.getElementById(e+"_colImNextPage").src=d+"ImNextPage_Dis.png";document.getElementById(e+"_colImNextPage").parentElement.setAttribute("activo",false)}}if($("#"+e+"_colImLastPage").length>0){if(c){document.getElementById(e+"_colImLastPage").src=d+"ImLastPage.png";document.getElementById(e+"_colImLastPage").parentElement.setAttribute("activo",true)}else{document.getElementById(e+"_colImLastPage").src=d+"ImLastPage_Dis.png";document.getElementById(e+"_colImLastPage").parentElement.setAttribute("activo",false)}}}else{grid.modifyGridImages(h,a,g,c,e)}}function isGridPaging(a){return document.getElementById("gview_"+a)!=null}function addEvent(d,c,b){var a=false;if(d!=null){if(d.addEventListener){d.addEventListener(c,b,false);a=true}else{if(d.attachEvent){d.attachEvent("on"+c,b);a=true}}}return a}function addCollectionSelector(cell,collectionID,elementIndex){var collection=document.getElementById(collectionID);var selectionMode=parseInt(collection.getAttribute("selectionmode"));var collectionData=eval(collectionID+"_data");var input=document.createElement("input");if(selectionMode==0){return}if(selectionMode==1){input.type="radio"}if(selectionMode==2){input.type="checkbox"}input.checked=(collectionData[elementIndex][1]=="true");input.name=collectionID+"_element";input.setAttribute("collectionid",collectionID);input.setAttribute("elementindex",elementIndex);addEvent(input,"click",selectElement);cell.appendChild(input)}function addCollectionSelectorIE(cell,collectionID,elementIndex){var collection=document.getElementById(collectionID);var selectionMode=parseInt(collection.getAttribute("selectionmode"));var collectionData=eval(collectionID+"_data");var htmlInputCode="";htmlInputCode="<input ";if(selectionMode==0){htmlInputCode+=" >";return}if(selectionMode==1){htmlInputCode+="type='radio' "}if(selectionMode==2){htmlInputCode+="type='checkbox' "}if(collectionData[elementIndex][1]=="true"){htmlInputCode+="checked "}htmlInputCode+="name = "+collectionID+"_element ";htmlInputCode+="collectionid='"+collectionID+"' ";htmlInputCode+="elementindex="+elementIndex+" ";htmlInputCode+="onclick = selectElement();";htmlInputCode+=">";cell.appendChild(document.createElement(htmlInputCode))}function selectElement(){var objectEvent=null;if(isIE&&isIE<8){objectEvent=event.srcElement}else{objectEvent=this}var collectionID=objectEvent.getAttribute("collectionid");var collection=document.getElementById(collectionID);var selectionMode=parseInt(collection.getAttribute("selectionmode"));var elementIndex=parseInt(objectEvent.getAttribute("elementindex"));var collectionData=eval(collectionID+"_data");if(selectionMode==1){clearChecks(collectionData)}if(objectEvent.checked){collectionData[elementIndex][1]="true"}else{collectionData[elementIndex][1]="false"}setEncodedCollection(collectionID)}function setEncodedCollection(b){var a=encodeCollection(b);document.getElementById("encodedcollection_"+b).value=a}function clearChecks(b){for(var a in b){b[a][1]="false"}}var MONTH_NAMES=new Array("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre","Ene","Feb","Mar","Abr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var DAY_NAMES=new Array("Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado","Dom","Lun","Mar","Mie","Jue","Vie","Sab");function LZ(a){return(a<0||a>9?"":"0")+a}function isDate(c,b){var a=getDateFromFormat(c,b);if(a==0){return false}return true}function fDates(e,f,c,d){var b=getDateFromFormat(e,f);var a=getDateFromFormat(c,d);if(b==0||a==0){return -1}else{if(b>a){return 1}}return 0}function formatDate(N,I){I=I+"";var o="";var z=0;var L="";var f="";var n=N.getYear()+"";var g=N.getMonth()+1;var J=N.getDate();var q=N.getDay();var p=N.getHours();var B=N.getMinutes();var t=N.getSeconds();var v,w,b,u,O,e,G,F,C,r,Q,p,P,j,a,D;var A=new Object();if(n.length<4){n=""+(n-0+1900)}A.y=""+n;A.yyyy=n;A.yy=n.substring(2,4);A.M=g;A.MM=LZ(g);A.MMM=MONTH_NAMES[g-1];A.NNN=MONTH_NAMES[g+11];A.d=J;A.dd=LZ(J);A.E=DAY_NAMES[q+7];A.EE=DAY_NAMES[q];A.H=p;A.HH=LZ(p);if(p==0){A.h=12}else{if(p>12){A.h=p-12}else{A.h=p}}A.hh=LZ(A.h);if(p>11){A.K=p-12}else{A.K=p}A.k=p+1;A.KK=LZ(A.K);A.kk=LZ(A.k);if(p>11){A.a="PM"}else{A.a="AM"}A.m=B;A.mm=LZ(B);A.s=t;A.ss=LZ(t);while(z<I.length){L=I.charAt(z);f="";while((I.charAt(z)==L)&&(z<I.length)){f+=I.charAt(z++)}if(A[f]!=null){o=o+A[f]}else{o=o+f}}return o}function _isInteger(c){var b="1234567890";for(var a=0;a<c.length;a++){if(b.indexOf(c.charAt(a))==-1){return false}}return true}function _getInt(f,d,e,c){for(var a=c;a>=e;a--){var b=f.substring(d,d+a);if(b.length<e){return null}if(_isInteger(b)){return b}}return null}function getDateFromFormat(z,q){z=z.replace(/-/g,"/")+"";q="dd/MM/yyyy";var w=0;var m=0;var s="";var f="";var v="";var h,g;var b=new Date();var j=2000;var u=1;var t=1;var d=0;var r=0;var o=0;var k="";while(m<q.length){s=q.charAt(m);f="";while((q.charAt(m)==s)&&(m<q.length)){f+=q.charAt(m++)}if(f=="yyyy"||f=="yy"||f=="y"){if(f=="yyyy"){h=4;g=4}if(f=="yy"){h=2;g=2}if(f=="y"){h=2;g=4}j=_getInt(z,w,h,g);if(j==null){return 0}w+=j.length;if(j.length==2){if(j>70){j=1900+(j-0)}else{j=2000+(j-0)}}}else{if(f=="MMM"||f=="NNN"){u=0;for(var p=0;p<MONTH_NAMES.length;p++){var e=MONTH_NAMES[p];if(z.substring(w,w+e.length).toLowerCase()==e.toLowerCase()){if(f=="MMM"||(f=="NNN"&&p>11)){u=p+1;if(u>12){u-=12}w+=e.length;break}}}if((u<1)||(u>12)){return 0}}else{if(f=="EE"||f=="E"){for(var p=0;p<DAY_NAMES.length;p++){var n=DAY_NAMES[p];if(z.substring(w,w+n.length).toLowerCase()==n.toLowerCase()){w+=n.length;break}}}else{if(f=="MM"||f=="M"){u=_getInt(z,w,f.length,2);if(u==null||(u<1)||(u>12)){return 0}w+=u.length}else{if(f=="dd"||f=="d"){t=_getInt(z,w,f.length,2);if(t==null||(t<1)||(t>31)){return 0}w+=t.length}else{if(f=="hh"||f=="h"){d=_getInt(z,w,f.length,2);if(d==null||(d<1)||(d>12)){return 0}w+=d.length}else{if(f=="HH"||f=="H"){d=_getInt(z,w,f.length,2);if(d==null||(d<0)||(d>23)){return 0}w+=d.length}else{if(f=="KK"||f=="K"){d=_getInt(z,w,f.length,2);if(d==null||(d<0)||(d>11)){return 0}w+=d.length}else{if(f=="kk"||f=="k"){d=_getInt(z,w,f.length,2);if(d==null||(d<1)||(d>24)){return 0}w+=d.length;d--}else{if(f=="mm"||f=="m"){r=_getInt(z,w,f.length,2);if(r==null||(r<0)||(r>59)){return 0}w+=r.length}else{if(f=="ss"||f=="s"){o=_getInt(z,w,f.length,2);if(o==null||(o<0)||(o>59)){return 0}w+=o.length}else{if(f=="a"){if(z.substring(w,w+2).toLowerCase()=="am"){k="AM"}else{if(z.substring(w,w+2).toLowerCase()=="pm"){k="PM"}else{return 0}}w+=2}else{if(z.substring(w,w+f.length)!=f){return 0}else{w+=f.length}}}}}}}}}}}}}}if(w!=z.length){return 0}if(u==2){if(((j%4==0)&&(j%100!=0))||(j%400==0)){if(t>29){return 0}}else{if(t>28){return 0}}}if((u==4)||(u==6)||(u==9)||(u==11)){if(t>30){return 0}}if(d<12&&k=="PM"){d=d-0+12}else{if(d>11&&k=="AM"){d-=12}}var a=new Date(j,u-1,t,d,r,o);return a.getTime()}function parseDate(h){var f=(arguments.length==2)?arguments[1]:false;generalFormats=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d");monthFirst=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");dateFirst=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");var b=new Array("generalFormats",f?"dateFirst":"monthFirst",f?"monthFirst":"dateFirst");var g=null;for(var e=0;e<b.length;e++){var a=window[b[e]];for(var c=0;c<a.length;c++){g=getDateFromFormat(h,a[c]);if(g!=0){return new Date(g)}}}return null}function updateDateField(e){var d=document.getElementById(e);var a=d.getAttribute("dateformat");if(isDate(d.value,a)){var c=new Date();c.setTime(getDateFromFormat(d.value,a));var b=document.getElementById("datefield_"+e);if(b!=null){b.value=formatDate(c,"yyyyMMddHHmmss")}}}document.getElementsByClassName=function(b){var a=[];var f=new RegExp("\\b"+b+"\\b");var e=this.getElementsByTagName("*");for(var d=0;d<e.length;d++){var c=e[d].className;if(f.test(c)){a.push(e[d])}}return a};var fc_ie=false;if(document.all){fc_ie=true}var calendars=Array();var iframe=null;var lastCalendar=null;var fc_months=Array("Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic");var fc_openCal;var fc_calCount=0;function getCalendar(a){return calendars[a]}function displayCalendarFor(a){id_toDisplay=a;var b=fc_getObj(a);if(lastCalendar!=null){lastCalendar.hide()}displayCalendar(b)}function displayCalendar(a){if(!a.id){a.id=fc_calCount++}var b=calendars[a.id];if(typeof(b)=="undefined"){b=new floobleCalendar();b.setElement(a);calendars[a.id]=b}if(typeof b.div!="undefined"){}lastCalendar=b;if(b.shown){b.hide()}else{b.show()}}function display3FieldCalendar(a,e,c){if(!a.id){a.id=fc_calCount++}if(!e.id){e.id=fc_calCount++}if(!c.id){c.id=fc_calCount++}var d=a.id+"-"+e.id+"-"+c.id;var b=calendars[d];if(typeof(b)=="undefined"){b=new floobleCalendar();b.setElements(a,e,c);calendars[d]=b}if(b.shown){b.hide()}else{b.show()}}function floobleCalendar(){this.setElement=fc_setElement;this.setElements=fc_setElements;this.parseDate=fc_parseDate;this.generateHTML=fc_generateHTML;this.generateDaysHtml=fc_generateDaysHtml;this.generateDaysBetweenSomeMonth=fc_generateDaysBetweenSomeMonth;this.show=fc_show;this.hide=fc_hide;this.moveMonth=fc_moveMonth;this.setDate=fc_setDate;this.formatDate=fc_formatDate;this.setDateFields=fc_setDateFields;this.parseDateFields=fc_parseDateFields;this.shown=false}function fc_setElement(a){this.element=a;this.format=this.element.title;this.value=this.element.value;this.id=this.element.id;this.mode=1}function fc_setElements(c,b,a){this.mElement=c;this.dElement=b;this.yElement=a;this.id=this.mElement.id+"-"+this.dElement.id+"-"+this.yElement.id;this.element=this.mElement;if(fc_absoluteOffsetLeft(this.dElement)<fc_absoluteOffsetLeft(this.element)){this.element=this.dElement}if(fc_absoluteOffsetLeft(this.yElement)<fc_absoluteOffsetLeft(this.element)){this.element=this.yElement}if(fc_absoluteOffsetTop(this.mElement)>fc_absoluteOffsetTop(this.element)){this.element=this.mElement}if(fc_absoluteOffsetTop(this.dElement)>fc_absoluteOffsetTop(this.element)){this.element=this.dElement}if(fc_absoluteOffsetTop(this.yElement)>fc_absoluteOffsetTop(this.element)){this.element=this.yElement}this.mode=2}function fc_parseDate(){if(this.element.value){this.date=new Date();var a="";var d="";var c,e;var f=0;c=this.format.substring(0,1);for(var b=0;b<this.format.length;b++){e=this.format.substring(b,b+1);if(e==c){d+=e}else{fc_parseToken(this.date,d,this.element.value,f);f+=d.length;d=e}c=e}fc_parseToken(this.date,d,this.element.value,f)}else{this.date=new Date()}if(""+this.date.getMonth()=="NaN"){this.date=new Date()}}function fc_parseDateFields(){this.date=new Date();if(this.mElement.value){this.date.setMonth(fc_getFieldValue(this.mElement)-1)}if(this.dElement.value){this.date.setDate(fc_getFieldValue(this.dElement))}if(this.yElement.value){this.date.setFullYear(fc_getFieldValue(this.yElement))}if(""+this.date.getMonth()=="NaN"){this.date=new Date()}}function fc_setDate(b,a,c){this.date.setYear(c);this.date.setMonth(a);this.date.setDate(b);if(this.mode==1){document.getElementById(id_toDisplay).value=this.formatDate()}else{this.setDateFields()}this.hide()}function fc_setDateFields(){fc_setFieldValue(this.mElement,fc_zeroPad(this.date.getMonth()+1));fc_setFieldValue(this.dElement,fc_zeroPad(this.date.getDate()));fc_setFieldValue(this.yElement,this.date.getFullYear())}function fc_formatDate(){var a="";var d="";var c,e;c=this.format.substring(0,1);for(var b=0;b<this.format.length;b++){e=this.format.substring(b,b+1);if(e==c){d+=e}else{a+=fc_formatToken(this.date,d);d=e}c=e}a+=fc_formatToken(this.date,d);return a}function fc_show(){var w;var h;var b=false;if(typeof(fc_openCal)!="undefined"){fc_openCal.hide()}if(this.mode==1){this.parseDate()}else{this.parseDateFields()}var m=document.getElementById(id_toDisplay);var u=this.element.attributes.resb;var v;var c=null;var o=null;var a=null;var g=true;if(m.value!=null&&m.value!=""){g=validateInputDateRange(m.value,this.element.attributes)}if(m.value!=null&&m.value!=""&&!g){if(isDate(m.value,"dd/MM/yyyy")){var r=this.element.attributes.top;var q=this.element.attributes.down;if(r!=null&&q!=null){var j=r.nodeValue;var p=q.nodeValue;b=betweenSameMonth(p,j)}this.showDate=new Date(getDateFromFormat(m.value,"dd/MM/yyyy"))}else{showError(traducir("Fecha no valida."));this.date=new Date();this.showDate=new Date(this.date.getTime())}}else{if(this.element.attributes.rest!=undefined){if(this.element.attributes.defd==undefined){var z=this.element.attributes.rest.nodeValue;var n=new Date(this.date.getTime());if(z=="less"||z=="more"||z=="lessOrEqual"||z=="moreOrEqual"){h=true;var p=this.element.attributes.date.nodeValue;if(u.nodeValue=="idRadio"){p=getValueOfAnotherDateComponent(p)}c=p;if(p=="vacio"){this.showDate=new Date(this.date.getTime())}else{var v=getDateFromFormat(p,"dd/MM/yyyy");this.showDate=new Date(v)}if(z=="less"){w=false;if(c!=null&&c!="vacio"){var d=v-86400000;c=formatDate(new Date(d),"dd/MM/yyyy")}}if(z=="lessOrEqual"){w=false}if(z=="more"){w=true;if(c!=null&&c!="vacio"){var d=v+86400000;c=formatDate(new Date(d),"dd/MM/yyyy")}}if(z=="moreOrEqual"){w=true}}else{var r=this.element.attributes.top;var q=this.element.attributes.down;if(r!=null&&q!=null){var j=r.nodeValue;var p=q.nodeValue;if(u.nodeValue=="idRadio"){var s=j;j=null;if(s!=null){var f=document.getElementById(s);if(f!=null){j=f.value}}var A=p;p=null;if(A!=null){var k=document.getElementById(A);if(k!=null){p=k.value}}}a=j;o=p;b=betweenSameMonth(p,j);var v=getDateFromFormat(p,"dd/MM/yyyy");this.showDate=new Date(v)}}}else{var p=this.element.attributes.defd.nodeValue;var v=getDateFromFormat(p,"dd/MM/yyyy");this.showDate=new Date(v)}}else{this.showDate=new Date(this.date.getTime())}}if(typeof(this.div)!="undefined"){try{document.body.removeChild(iframe)}catch(t){}if(h){var y=c;this.div.innerHTML=this.generateDaysHtml(w,y.substring(0,2),new Date(getDateFromFormat(y,"dd/MM/yyyy")))}else{if(b){this.div.innerHTML=this.generateDaysBetweenSomeMonth(o.substring(0,2),a.substring(0,2))}else{this.div.innerHTML=this.generateHTML()}}}if(typeof(this.div)=="undefined"){this.div=document.createElement("DIV");this.div.style.position="absolute";this.div.style.zIndex="99";this.div.style.display="none";this.div.className="fc_main";if(h){var y=c;this.div.innerHTML=this.generateDaysHtml(w,y.substring(0,2),new Date(getDateFromFormat(y,"dd/MM/yyyy")))}else{if(b){this.div.innerHTML=this.generateDaysBetweenSomeMonth(o.substring(0,2),a.substring(0,2))}else{this.div.innerHTML=this.generateHTML()}}this.div.style.left=fc_absoluteOffsetLeft(this.element);this.div.style.top=fc_absoluteOffsetTop(this.element)+this.element.offsetHeight+1;document.body.appendChild(this.div)}if(!isIE){document.getElementById(id_toDisplay).parentNode.appendChild(this.div)}this.div.style.display="block";this.shown=true;fc_openCal=this;showIframe(this)}function getValueOfAnotherDateComponent(a){var c=a;a=null;if(c!=null){var b=document.getElementById(c);if(b!=null){a=b.value}}if(a==null||a==""){return"vacio"}return a}function validateInputDateRange(o,f){var n=o;var m=f.down;var q=f.top;var c=f.rest;var s=f.resb;var e=f.date;var n=n.split("/");n=new Date(n[2],Number(n[1])-1,n[0]);if(m!=null&&q!=null){var p=m;var h=q;if(s!=null&&s.nodeValue=="idRadio"){var b=p;if(b!=null){var a=document.getElementById(b);if(a!=null){p=a.value}}var k=h;if(k!=null){var j=document.getElementById(k);if(j!=null){h=j.value}}}if(p!=null){p=p.split("/");p=new Date(p[2],Number(p[1])-1,p[0]);if(n<p){return true}}if(h!=null){h=h.split("/");h=new Date(h[2],Number(h[1])-1,h[0]);if(n>h){return true}}}if(c!=null){typ=c.nodeValue;if(typ!=null&&typ!="entre"){var r=e.nodeValue;if(s.nodeValue=="idRadio"){var d=r;if(d!=null){var g=document.getElementById(d);if(g!=null){r=g.value}}}r=r.split("/");r=new Date(r[2],Number(r[1])-1,r[0]);if(typ=="less"){if(n>r){return true}}if(typ=="lessOrEqual"){if(n>=r){return true}}if(typ=="more"){if(n<r){return true}}if(typ=="moreOrEqual"){if(n<=r){return true}}}}return false}function betweenSameMonth(e,f){if(e==null||f==null){return false}var d=e.substring(3,5);var c=e.substring(6,10);var b=f.substring(3,5);var a=f.substring(6,10);if(d==b&&c==a){return true}return false}function showIframe(d){try{document.body.removeChild(iframe)}catch(c){}iframe=document.createElement("IFRAME");iframe.className="iframeClass";iframe.setAttribute("src","");iframe.setAttribute("scrolling","no");iframe.setAttribute("frameborder","0");iframe.style.position="absolute";iframe.style.width="160px";iframe.style.height="135px";iframe.style.zIndex="90";iframe.style.backgroundColor="transparent";var b=fc_absoluteOffsetLeft(d.element);var a=fc_absoluteOffsetTop(d.element)+d.element.offsetHeight+1;iframe.style.left=b+"px";iframe.style.top=a+"px";iframe.style.display="block";document.body.appendChild(iframe)}function cerrar(a){a.parentNode.style.display="none";if(iframe!=null){iframe.style.display="none"}}function mostrar(a){if(iframe!=null){iframe.style.display="block"}a.parentNode.style.display="block"}function fc_generateHTML(){var b='<TABLE onmouseover="mostrar(this);" onmouseout="cerrar(this);"><TR><TD CLASS="fc_head" COLSPAN="6"><DIV STYLE="float: right"></DIV>CALENDARIO:</TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').hide();\"><B>X</B></TD></TR>";b+='<TR><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(-12);"><B><<</B></TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(-1);"><B><</B></TD><TD COLSPAN="3" CLASS="fc_wk">'+fc_months[this.showDate.getMonth()]+" "+fc_getYear(this.showDate)+'</TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(1);"><B>></B></TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').moveMonth(12);\"><B>>></B></TD></TR>";b+='<TR><TD WIDTH="14%" CLASS="fc_wk">Lu</TD><TD WIDTH="14%" CLASS="fc_wk">Ma</TD><TD WIDTH="14%" CLASS="fc_wk">Mi</TD><TD WIDTH="14%" CLASS="fc_wk">Ju</TD><TD WIDTH="14%" CLASS="fc_wk">Vi</TD><TD class="fc_wknd" WIDTH="14%">Sa</TD><TD class="fc_wknd" WIDTH="14%">Do</TD></TR>';b+="<TR>";var e=0;var a,c;var d=fc_monthLength(this.showDate);for(a=0;a<fc_firstDOW(this.showDate);a++){e++;b+="<TD> </TD>"}for(a=1;a<=d;a++){if(e==0){b+="<TR>"}if(this.showDate.getMonth()==this.date.getMonth()&&this.showDate.getYear()==this.date.getYear()&&this.date.getDate()==a){c=' style="font-weight: bold;"'}else{c=""}b+='<TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').setDate("+a+", "+this.showDate.getMonth()+", "+this.showDate.getFullYear()+');" '+c+">"+a+"</TD>";e++;if(e==7){b+="</TR>";e=0}}if(e!=0){for(a=e;a<7;a++){b+="<TD> </TD>"}}b+="</TR>";b+="</TABLE>";return b}function fc_generateDaysBetweenSomeMonth(d,e){var b='<TABLE onmouseover="mostrar(this);" onmouseout="cerrar(this);"><TR><TD CLASS="fc_head" COLSPAN="6"><DIV STYLE="float: right"></DIV>CALENDARIO:</TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').hide();\"><B>X</B></TD></TR>";b+='<TR><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(-12);"><B><<</B></TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(-1);"><B><</B></TD><TD COLSPAN="3" CLASS="fc_wk">'+fc_months[this.showDate.getMonth()]+" "+fc_getYear(this.showDate)+'</TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(1);"><B>></B></TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').moveMonth(12);\"><B>>></B></TD></TR>";b+='<TR><TD WIDTH="14%" CLASS="fc_wk">Lu</TD><TD WIDTH="14%" CLASS="fc_wk">Ma</TD><TD WIDTH="14%" CLASS="fc_wk">Mi</TD><TD WIDTH="14%" CLASS="fc_wk">Ju</TD><TD WIDTH="14%" CLASS="fc_wk">Vi</TD><TD class="fc_wknd" WIDTH="14%">Sa</TD><TD class="fc_wknd" WIDTH="14%">Do</TD></TR>';b+="<TR>";var f=0;var a,c;for(a=0;a<fc_firstDOW(this.showDate);a++){f++;b+="<TD> </TD>"}for(a=d;a<=e;a++){if(f==0){b+="<TR>"}if(this.showDate.getMonth()==this.date.getMonth()&&this.showDate.getYear()==this.date.getYear()&&this.date.getDate()==a){c=' style="font-weight: bold;"'}else{c=""}b+='<TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').setDate("+a+", "+this.showDate.getMonth()+", "+this.showDate.getFullYear()+');" '+c+">"+a+"</TD>";f++;if(f==7){b+="</TR>";f=0}}if(f!=0){for(a=f;a<7;a++){b+="<TD> </TD>"}}b+="</TR>";b+="</TABLE>";return b}function fc_generateDaysHtml(g,j,b){var f='<TABLE onmouseover="mostrar(this);" onmouseout="cerrar(this);"><TR><TD CLASS="fc_head" COLSPAN="6"><DIV STYLE="float: right"></DIV>CALENDARIO:</TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').hide();\"><B>X</B></TD></TR>";f+='<TR><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(-12);"><B><<</B></TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(-1);"><B><</B></TD><TD COLSPAN="3" CLASS="fc_wk">'+fc_months[this.showDate.getMonth()]+" "+fc_getYear(this.showDate)+'</TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+'\').moveMonth(1);"><B>></B></TD><TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').moveMonth(12);\"><B>>></B></TD></TR>";f+='<TR><TD WIDTH="14%" CLASS="fc_wk">Lu</TD><TD WIDTH="14%" CLASS="fc_wk">Ma</TD><TD WIDTH="14%" CLASS="fc_wk">Mi</TD><TD WIDTH="14%" CLASS="fc_wk">Ju</TD><TD WIDTH="14%" CLASS="fc_wk">Vi</TD><TD class="fc_wknd" WIDTH="14%">Sa</TD><TD class="fc_wknd" WIDTH="14%">Do</TD></TR>';f+="<TR>";var k=0;var e,a;for(e=0;e<fc_firstDOW(this.showDate);e++){k++;f+="<TD> </TD>"}var d=false;if(j=="va"){d=true;b=new Date(this.date.getTime())}var h;var c;if(g){if(d){h=1}else{h=j}c=fc_monthLength(b)}else{h=1;if(d){c=fc_monthLength(b)}else{c=j}}for(e=h;e<=c;e++){if(k==0){f+="<TR>"}if(this.showDate.getMonth()==this.date.getMonth()&&this.showDate.getYear()==this.date.getYear()&&this.date.getDate()==e){a=' style="font-weight: bold;"'}else{a=""}f+='<TD CLASS="fc_date" onMouseover="this.className = \'fc_dateHover\';" onMouseout="this.className=\'fc_date\';" onClick="getCalendar(\''+this.id+"').setDate("+e+", "+this.showDate.getMonth()+", "+this.showDate.getFullYear()+');" '+a+">"+e+"</TD>";k++;if(k==7){f+="</TR>";k=0}}if(k!=0){for(e=k;e<7;e++){f+="<TD> </TD>"}}f+="</TR>";f+="</TABLE>";return f}function fc_hide(){if(this.div!=null&&this.div!=false){this.div.style.display="none"}this.shown=false;fc_openCal=undefined}function valRestrictedDate(b,o,m){var a=b.element;var j=a.attributes.rest.nodeValue;if(j=="less"||j=="lessOrEqual"){var r=a.attributes.date.nodeValue;var f=getDateFromFormat(r,"dd/MM/yyyy");var q=new Date(f);return compareByTopRestriction(o,m,q)}else{if(j=="more"||j=="moreOrEqual"){var r=a.attributes.date.nodeValue;var f=getDateFromFormat(r,"dd/MM/yyyy");var q=new Date(f);return compareByDownRestriction(o,m,q)}else{var c=a.attributes.down.nodeValue;var k=getDateFromFormat(c,"dd/MM/yyyy");var p=new Date(k);var n=compareByDownRestriction(o,m,p);var h=a.attributes.top.nodeValue;var e=getDateFromFormat(h,"dd/MM/yyyy");var g=new Date(e);var s=compareByTopRestriction(o,m,g);if(n!=s){if(n==1){return 3}else{if(s==1){return 4}else{if(s==-1||n==-1){return -1}}}return 0}else{return n}}}}function compareByTopRestriction(a,c,e){var b=e.getFullYear();var d=e.getMonth()+1;if(a==b){if(c==d){return 1}else{if(c<d){return 0}else{return -1}}}else{if(a>b){return -1}else{return 0}}}function compareByDownRestriction(a,c,e){var b=e.getFullYear();var d=e.getMonth()+1;if(a==b){if(c==d){return 1}else{if(c>d){return 0}else{return -1}}}else{if(a<b){return -1}else{return 0}}}function fc_moveMonth(c){var a=this.showDate.getMonth();var g=fc_getYear(this.showDate);var b=this.element.attributes.rest!=undefined;var d;if(c==1){if(a==11){if(b){d=valRestrictedDate(this,g+1,1);if(d==-1){return}}this.showDate.setMonth(0);this.showDate.setYear(g+1)}else{if(b){d=valRestrictedDate(this,g,a+2);if(d==-1){return}}this.showDate.setMonth(a+1)}}else{if(c==-1){if(a==0){if(b){d=valRestrictedDate(this,g-1,12);if(d==-1){return}}this.showDate.setMonth(11);this.showDate.setYear(g-1)}else{if(b){d=valRestrictedDate(this,g,a);if(d==-1){return}}this.showDate.setMonth(a-1)}}else{if(c==12){if(b){d=valRestrictedDate(this,g+1,a+1);if(d==-1){return}}this.showDate.setYear(g+1)}else{if(c==-12){if(b){d=valRestrictedDate(this,g-1,a+1);if(d==-1){return}}this.showDate.setYear(g-1)}}}}if(b&&d==1){var f=this.element.attributes.date.nodeValue;var e;if(this.element.attributes.rest.nodeValue=="less"){e=false}else{e=true}this.div.innerHTML=this.generateDaysHtml(e,f.substring(0,2),new Date(getDateFromFormat(f,"dd/MM/yyyy")))}else{if(b&&d==3){var f=this.element.attributes.down.nodeValue;this.div.innerHTML=this.generateDaysHtml(true,f.substring(0,2),new Date(getDateFromFormat(f,"dd/MM/yyyy")))}else{if(b&&d==4){var f=this.element.attributes.top.nodeValue;this.div.innerHTML=this.generateDaysHtml(false,f.substring(0,2),new Date(getDateFromFormat(f,"dd/MM/yyyy")))}else{this.div.innerHTML=this.generateHTML()}}}}function fc_absoluteOffsetTop(d){var c=d.offsetTop;var a=d.offsetParent;var b=false;while(a!=document.body&&!b){c+=a.offsetTop;a=a.offsetParent;if(a==null){b=true}}return c}function fc_absoluteOffsetLeft(d){var c=d.offsetLeft;var a=d.offsetParent;var b=false;while(a!=document.body&&!b){c+=a.offsetLeft;a=a.offsetParent;if(a==null){b=true}}return c}function fc_firstDOW(b){var c=b.getDay();var a=b.getDate();if(a%7==0){return c}return(7+c-(a%7))%7}function fc_getYear(a){var b=a.getYear();if(b>1900){return b}return 1900+b}function fc_monthLength(a){var d=a.getMonth();var c=30;if(d==0||d==2||d==4||d==6||d==7||d==9||d==11){c=31}if(d==1){var b=a.getYear();if(b%4==0&&(b%400==0||b%100!=0)){c=29}else{c=28}}return c}function fc_formatToken(a,b){var c=b.substring(0,1);if(c=="y"||c=="Y"){if(b.length==2){return fc_zeroPad(a.getFullYear()%100)}if(b.length==4){return a.getFullYear()}}if(c=="d"||c=="D"){if(b.length==2){return fc_zeroPad(a.getDate())}}if(c=="m"||c=="M"){if(b.length==2){return fc_zeroPad(a.getMonth()+1)}if(b.length==3){return fc_months[a.getMonth()]}}return b}function fc_parseToken(b,d,e,g){var f=d.substring(0,1);var a;if(f=="y"||f=="Y"){if(d.length==2){a=e.substring(g,g+2);if(a<70){b.setFullYear(2000+parseInt(a))}else{b.setFullYear(1900+parseInt(a))}}if(d.length==4){a=e.substring(g,g+4);b.setFullYear(a)}}if(f=="d"||f=="D"){if(d.length==2){a=e.substring(g,g+2);b.setDate(a)}}if(f=="m"||f=="M"){if(d.length==2){a=e.substring(g,g+2);b.setMonth(a-1)}if(d.length==3){a=e.substring(g,g+3);var c;for(c=0;c<fc_months.length;c++){if(fc_months[c].toUpperCase()==a.toUpperCase()){b.setMonth(c)}}}}}function fc_zeroPad(a){if(a<10){return"0"+a}return a}function fc_getObj(a){if(fc_ie){return document.all[a]}else{return document.getElementById(a)}}function fc_setFieldValue(c,b){if(c.type.substring(0,6)=="select"){var a;for(a=0;a<c.options.length;a++){if(fc_equals(c.options[a].value,b)){c.selectedIndex=a}}}else{c.value=b}}function fc_getFieldValue(a){if(a.type.substring(0,6)=="select"){return a.options[a.selectedIndex].value}else{return a.value}}function fc_equals(b,a){if(b==a){return true}if(1*b==1*a){return true}return false}function getCookieName(a){if(document.cookie.length>0){c_start=document.cookie.indexOf(a+"=");if(c_start!=-1){c_start=c_start+a.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""}function getUserName(){username=getCookieName("username");document.getElementById("user_id").value=username}function setCookieName(a,b,d){var c=new Date();c.setDate(c.getDate()+d);document.cookie=a+"="+escape(b)+((d==null)?"":"; expires="+c.toUTCString())}function leerCookie(f){var e;var b=document.cookie.split(";");var h,c;var g;for(e=0;e<b.length;e++){var d=trim(b[e]);g=d.indexOf("=");h=d.substring(0,g);if(h==f){return unescape(d.substring(1+g,d.length))}}return null}function sizeCollection(a){var b=0;for(var c in a){b+=1}return b}var validateMultiEnter=false;var skeepEnter=false;function submitenter(f,d){var a;var c=false;if(window.event){a=window.event.keyCode}else{if(d){a=d.which}else{return true}}if(a==13&&ejecutoEnterEnIrA!=1){if(validateMultiEnter){if(skeepEnter){pararPropagacionEvento(d);return true}skeepEnter=true}var b=$('button[class^="action-button"][default="true"]');if(b!=""){if(b!=null){for(i=0;(i<b.length)&&!c;i++){b[i].focus();b[i].click();b[i].blur();c=true}}}pararPropagacionEvento(d);return false}else{ejecutoEnterEnIrA=0;return true}}function closeCalendars(){calendars=Array();if(lastCalendar!=null){iframe.style.display="none";try{document.body.removeChild(iframe)}catch(a){}if(lastCalendar.shown){lastCalendar.hide()}if(lastCalendar.div.style.display!=null){if(lastCalendar.div.style.display=="none"||lastCalendar.div.style.display=="block"){lastCalendar.hide()}}}}function imprimirTicket(c){var a=document.getElementById(c);var b='<html><body onload="window.print(); window.close();">';b+=a.parentNode.innerHTML;b+="</body></html>";ventana=window.open("","ventana","resizable=yes,scrollbars=no");ventana.document.write(b);ventana.document.close()}function exportToFile(a){var b=window.open(a,"window2","")}function getDateForGlb(){var b=new Date();var e=b.getFullYear();var d=b.getMonth()+1;var g=b.getDate();var a=b.getHours();var c=b.getMinutes();var h=b.getSeconds();if(d<10){d="0"+d}if(g<10){g="0"+g}if(a<10){a="0"+a}if(c<10){c="0"+c}if(h<10){h="0"+h}var f=e+d+g+a+c+h;return f}function checkTextFieldInput(c,b){var a=new RegExp(b.getAttribute("regtext"));if(isIE&&isIE<8){if(a.test(c.srcElement.value)){submitTextDependencies(c.srcElement.id)}}else{if(a.test(c.target.value)){submitTextDependencies(c.target.id)}}}function checkTextFieldInputWithoutValidation(a){if(isIE&&isIE<8){submitTextDependencies(a.srcElement.id)}else{submitTextDependencies(a.target.id)}}function submitTextDependencies(d){var b=document.getElementById("uuid");var c=encodeForm(getDocumentIDForm());var e="";if(CyberBank.encryption.enable){var a=getRandomPassword();c=JSON.stringify(createSecureRequest(c,a));e={parameters:c}}else{e=c}$.ajaxInvoker({type:"POST",url:"index",data:e,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8",idText:d,TextFieldRequest:"TextFieldRequest"},async:false}).done(function(g,j,h){var f=g;if(CyberBank.encryption.enable){f=resolveSecureResponse(g,a)}handleTfDependencies(f)}).always(function(){anularTimeout(timerId);$.hideprogress()})}function handleTfData(b){var f=b.childNodes[0].childNodes[0].nodeValue;var c="";try{var c=b.childNodes[1].childNodes[0].nodeValue}catch(d){}var a=document.getElementById(f);a.value=c}function handleTfDependencies(b){var d=b.documentElement.getElementsByTagName("tf-data-error");handleTextFieldError(d);var f=b.documentElement.getElementsByTagName("tf");for(var c=0;c<f.length;c++){handleTfData(f[c])}var e=b.documentElement.getElementsByTagName("cache-data");for(var a=0;a<e.length;a++){handleTextFieldResponse(e[a])}}function handleTextFieldError(c){var e="";for(var b=0;b<c.length;b++){var a=c[b].getElementsByTagName("tf-error");e+=a[0].childNodes[1].childNodes[0].nodeValue+"."}var d="Transacción exitosa";if(e!=""&&(e.substr(0,d.length)!="Transacción exitosa")){showError("Error: "+e)}}function handleTextFieldResponse(g){var a=g.getElementsByTagName("fieldID")[0].childNodes[0].nodeValue;var b=g.getElementsByTagName("option");var h=new Array();for(var d=0;d<b.length;d++){var c=b[d].getElementsByTagName("key")[0];var e=b[d].getElementsByTagName("value")[0];h[c.childNodes[0].nodeValue]=e.childNodes[0].nodeValue}if(isIE&&isIE<8){fillSelectIE(a,h);var f=document.getElementById(a);f.setAttribute("loaded","true")}else{fillSelectField(a,h)}}function showHint(e,b){var a=$("#"+b).offset().left;var d=$("#"+b).offset().top;var c=$("#helpWindow_"+b).detach();$("#"+getDocumentIDForm()).prepend(c);$("#helpMsgPlaceholder_"+b).html(e);$("#helpWindow_"+b).jqm({modal:false,overlay:0}).jqmShow().jqDrag(".jqDrag");$("#helpWindow_"+b).offset({top:d,left:a})}function crearNuevoUsuario(){var d="";var c="";var b=document.getElementById("newUser");b.value=true;d+=c.name+"="+encodeURIParams(c.value)+"&";d+=b.name+"="+encodeURIParams(b.value)+"&";d=d.substr(0,(d.length-1));c=document.getElementById("uuid");var e="";if(CyberBank.encryption.enable){var a=getRandomPassword();d=JSON.stringify(createSecureRequest(d,a));e={parameters:d}}else{e=d}$.ajaxInvoker({type:"POST",url:"index",data:e,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8",nuevoUsuario:true},async:false}).done(function(g,j,h){var f=g;if(CyberBank.encryption.enable){f=resolveSecureResponse(g,a)}cargarPrimerLayoutNewUser(f);fillUuid();borrarTextoBarraEstado()}).always(function(){})}function olvidoPassword(){var e="";var d="";var b;var c=document.getElementById("forgotPassword");c.value=true;d=document.getElementById("uuid");e+=d.name+"="+encodeURIParams(d.value)+"&";e+=c.name+"="+encodeURIParams(c.value)+"&";e=e.substr(0,(e.length-1));var f="";if(CyberBank.encryption.enable){var a=getRandomPassword();e=JSON.stringify(createSecureRequest(e,a));f={parameters:e}}else{f=e}$.ajaxInvoker({type:"POST",url:"index",data:f,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8",nuevoUsuario:true},async:false}).done(function(h,k,j){var g=h;if(CyberBank.encryption.enable){g=resolveSecureResponse(h,a)}cargarPrimerLayoutNewUser(g);fillUuid();borrarTextoBarraEstado()}).always(function(){})}function cargarPrimerLayoutNewUser(a){hideContainer();collapseAllMenus();document.getElementById("login").innerHTML=a;document.getElementById("login").style.display="";cargarDocumentReady();try{if($($("form#main_form #errorPanelCollection p"))==null||$($("form#main_form #errorPanelCollection p")).length==0){document.getElementById(document.getElementById("focus").getAttribute("id_elem")).focus()}}catch(b){}}function cargaInvisible(a){var b=window.parent.document.getElementById("listaIds");b.value=a}function uploadPopup(a,f,d,e,b){var c="<html><head>";c+='<style type="text/css">';c+="fieldset {background-color:#E8F0F2;color:#000000;font-family:Arial;font-style:normal;font-weight:normal;text-decoration:none;}";c+="</style>";c+="</head>";c+="<body>";c+="<fieldset>";c+=a;c+='<table id="tableAlign2" class="structure_table"><tbody><tr><td>';c+="<form method=\"POST\" enctype='multipart/form-data' charset='utf-8'  ";c+='action="upload?path=';c+=f;c+="&entity=";c+=e;c+='">';c+='<input type="file"';c+='name="fichero" id="browserNoVisible" charset="UTF-8" onChange=\'filtroArchivos(this,"'+d+'")\' accept="text/tcl" style="height = 25px; ">';c+='<input type="submit" value="Subir archivo" style="height = 25px; " charset="UTF-8" >';c+='<input type="hidden" id="accion" value="';c+=b;c+='">';c+="</form>";c+="</td></tr></tbody></table></fieldset></body></html>";ventana=window.open("uploadFile.html","","top=300,left=300,width=500,height=200, status =0,toolbar=0 ");ventana.document.write(c);ventana.document.close()}function tieneCaracteresEspeciales(a){caracteresEspeciales=/[áíóúñç]/g;if(a.match(caracteresEspeciales)){return true}return false}function filtroArchivos(f,c){file=f.value;if(file==null&&file==""){showUploadError(traducir("No ingreso nombre de archivo."));return}if(tieneCaracteresEspeciales(file)){f.value="";showUploadError(traducir("El nombre del archivo es invalido. El mismo no debe contener ni acentos, ni caracteres especiales")+"<br>"+traducir("Por favor, seleccione un nuevo archivo, o modifique el nombre del actual."));return}if(c=="otros"){allowSubmit=true;return}var e=c.split(".");var d=new Array();for(var a=0;a<e.length;a++){d.push(e[a])}allowSubmit=false;if(!file){return}while(file.indexOf("\\")!=-1){file=file.slice(file.indexOf("\\")+1)}c=file.slice(file.indexOf(".")+1).toLowerCase();for(var b=0;b<d.length;b++){if(d[b]==c){allowSubmit=true;break}}if(allowSubmit){hideUploadError()}else{f.value="";showUploadError(traducir("Usted solo puede subir archivos con extensiones")+" "+(d.join(" "))+"<br>"+traducir("Por favor seleccione un nuevo archivo"))}}function downloadLink(a,g){var d=document.getElementById(a);var c=d.getAttribute("colsToValidate");if(c!=null){if(!validateCollections(c)){return}}var f=encodeForm(getDocumentIDForm());f=f.substr(0,(f.length-1));var b=$("#uuid").val();var e=window.open(g+"&uuid="+b+"&"+f,"window3","")}function mostrarexcepcion(){div=document.getElementById("exception_details");if(div.style.display=="none"){div.style.display=""}else{div.style.display="none"}}function autocompletedate(b,a){if(a.keyCode!=8){value=b.value;switch(value.length){case 2:b.value=value+"/";break;case 5:b.value=value+"/";break;default:}}}var horizontal_offset="9px";var vertical_offset="0";var ie=document.all;var ns6=document.getElementById&&!document.all;function getposOffset(d,c){var b=(c=="left")?d.offsetLeft:d.offsetTop;var a=d.offsetParent;while(a!=null){b=(c=="left")?b+a.offsetLeft:b+a.offsetTop;a=a.offsetParent}return b}function iecompattest(){return(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body}function clearbrowseredge(d,b){var a=(b=="rightedge")?parseInt(horizontal_offset)*-1:parseInt(vertical_offset)*-1;if(b=="rightedge"){var c=ie&&!window.opera?iecompattest().scrollLeft+iecompattest().clientWidth-30:window.pageXOffset+window.innerWidth-40;dropmenuobj.contentmeasure=dropmenuobj.offsetWidth;if(c-dropmenuobj.x<dropmenuobj.contentmeasure){a=dropmenuobj.contentmeasure+d.offsetWidth+parseInt(horizontal_offset)}}else{var c=ie&&!window.opera?iecompattest().scrollTop+iecompattest().clientHeight-15:window.pageYOffset+window.innerHeight-18;dropmenuobj.contentmeasure=dropmenuobj.offsetHeight;if(c-dropmenuobj.y<dropmenuobj.contentmeasure){a=dropmenuobj.contentmeasure-d.offsetHeight}}return a}function showhint2(d,f,g,j){var m=$("#"+f.id);var a=$("#"+f.id+" p");var k=m.text().length;var h=m.width();var b=0;var c=0;var o=12;if(m&&m.css("padding-right")){b=parseInt(m.css("padding-right").replace("px",""))}if(a&&a.css("padding-right")){c=parseInt(a.css("padding-right").replace("px",""))}if(m&&a.css("font-size")){o=parseInt(m.css("font-size").replace("px",""))}var n=(k*o)+Number(b+c+11);if(h>n){return}if(document.getElementById("hintbox")){dropmenuobj=document.getElementById("hintbox");dropmenuobj.innerHTML=d;dropmenuobj.style.left=dropmenuobj.style.top=-500;if(j!=""){dropmenuobj.widthobj=dropmenuobj.style;dropmenuobj.widthobj.width=j}dropmenuobj.x=getposOffset(f,"left");dropmenuobj.y=getposOffset(f,"top");dropmenuobj.style.left=dropmenuobj.x-clearbrowseredge(f,"rightedge")+f.offsetWidth+"px";dropmenuobj.style.top=dropmenuobj.y-clearbrowseredge(f,"bottomedge")+"px";$("#hintbox").css("visibility","visible");f.onmouseout=hidetip}}function hidetip(a){$("#hintbox").css("visibility","hidden");if(typeof dropmenuobj!=="undefined"){dropmenuobj.style.left="-500px";dropmenuobj.style.top="-500px"}}function createhintbox(){var a=document.createElement("div");a.setAttribute("id","hintbox");document.body.appendChild(a)}if(window.addEventListener){window.addEventListener("load",createhintbox,false)}else{if(window.attachEvent){window.attachEvent("onload",createhintbox)}else{if(document.getElementById){window.onload=createhintbox}}}function pass(h,g){var a=getInternetExplorerVersion()>-1&&getInternetExplorerVersion()<8;var e=document.getElementById(h);var d=document.getElementById(g);var b=document.getElementById(h);var c;for(c=e.length-1;c>=0;c--){if(e.options[c].selected){if(!a){d.add(e.options[c],null)}else{d.options[d.options.length]=new Option(e.options[c].text,1)}}}for(c=b.length-1;c>=0;c--){if(b.options[c].selected){if(!a){b.remove(c)}else{b.options[c]=null}}}}function passAll(b,a){$("#"+b+" option").appendTo("#"+a)}function encodeURIParams(a){return encodeURIComponent(a)}document.getElementsByClassName=function(b){var a=[];var f=new RegExp("\\b"+b+"\\b");var e=this.getElementsByTagName("*");for(var d=0;d<e.length;d++){var c=e[d].className;if(f.test(c)){a.push(e[d])}}return a};var flaps=null;function evalScript(){var input=document.getElementById("script");if(input!=null&&input.value!=""){eval(input.value)}}function createFlap(a){flaps=new ddtabcontent(a);flaps.setpersist(true);flaps.setselectedClassTarget("link");flaps.init()}function ddtabcontent(a){this.tabinterfaceid=a;this.tabs=document.getElementById(a).getElementsByTagName("a");this.enabletabpersistence=true;this.hottabspositions=[];this.currentTabIndex=0;this.subcontentids=[];this.revcontentids=[];this.selectedClassTarget="link"}ddtabcontent.getCookie=function(a){var b=new RegExp(a+"=[^;]+","i");if(document.cookie.match(b)){return document.cookie.match(b)[0].split("=")[1]}return""};ddtabcontent.setCookie=function(a,b){document.cookie=a+"="+b+";path=/"};ddtabcontent.prototype={expandit:function(a){this.cancelautorun();var b="";try{if(typeof a=="string"&&document.getElementById(a).getAttribute("rel")){b=document.getElementById(a)}else{if(parseInt(a)!=NaN&&this.tabs[a].getAttribute("rel")){b=this.tabs[a]}}}catch(c){showError("Invalid Tab ID or position entered!")}if(b!=""){this.expandtab(b)}},cycleit:function(b,a){if(b=="next"){var c=(this.currentTabIndex<this.hottabspositions.length-1)?this.currentTabIndex+1:0}else{if(b=="prev"){var c=(this.currentTabIndex>0)?this.currentTabIndex-1:this.hottabspositions.length-1}}if(typeof a=="undefined"){this.cancelautorun()}this.expandtab(this.tabs[this.hottabspositions[c]])},setpersist:function(a){this.enabletabpersistence=a},setselectedClassTarget:function(a){this.selectedClassTarget=a||"link"},getselectedClassTarget:function(a){return(this.selectedClassTarget==("linkparent".toLowerCase()))?a.parentNode:a},urlparamselect:function(b){var a=window.location.search.match(new RegExp(b+"=(\\d+)","i"));return(a==null)?null:parseInt(RegExp.$1)},expandtab:function(b){var c=b.getAttribute("rel");var d=(b.getAttribute("rev"))?","+b.getAttribute("rev").replace(/\s+/,"")+",":"";this.expandsubcontent(c);this.expandrevcontent(d);for(var a=0;a<this.tabs.length;a++){this.getselectedClassTarget(this.tabs[a]).className=(this.tabs[a].getAttribute("rel")==c)?"selected":""}if(this.enabletabpersistence){ddtabcontent.setCookie(this.tabinterfaceid,b.tabposition)}this.setcurrenttabindex(b.tabposition)},expandsubcontent:function(c){for(var b=0;b<this.subcontentids.length;b++){var a=document.getElementById(this.subcontentids[b]);a.style.display=(a.id==c)?"block":"none"}},expandrevcontent:function(c){var a=this.revcontentids;for(var b=0;b<a.length;b++){document.getElementById(a[b]).style.display=(c.indexOf(","+a[b]+",")!=-1)?"block":"none"}},setcurrenttabindex:function(a){for(var b=0;b<this.hottabspositions.length;b++){if(a==this.hottabspositions[b]){this.currentTabIndex=b;break}}},autorun:function(){this.cycleit("next",true)},cancelautorun:function(){if(typeof this.autoruntimer!="undefined"){clearInterval(this.autoruntimer)}},init:function(a){var e=ddtabcontent.getCookie(this.tabinterfaceid);var d=-1;var f=this.urlparamselect(this.tabinterfaceid);this.automodeperiod=a||0;for(var c=0;c<this.tabs.length;c++){this.tabs[c].tabposition=c;if(this.tabs[c].getAttribute("rel")){var b=this;this.hottabspositions[this.hottabspositions.length]=c;this.subcontentids[this.subcontentids.length]=this.tabs[c].getAttribute("rel");this.tabs[c].onclick=function(){b.expandtab(this);b.cancelautorun();return false};if(this.tabs[c].getAttribute("rev")){this.revcontentids=this.revcontentids.concat(this.tabs[c].getAttribute("rev").split(/\s*,\s*/))}if(f==c||this.enabletabpersistence&&d==-1&&parseInt(e)==c||!this.enabletabpersistence&&d==-1&&this.getselectedClassTarget(this.tabs[c]).className=="selected"){d=c}}}if(d!=-1){this.expandtab(this.tabs[d])}else{this.expandtab(this.tabs[this.hottabspositions[0]])}if(parseInt(this.automodeperiod)>500&&this.hottabspositions.length>1){this.autoruntimer=setInterval(function(){b.autorun()},this.automodeperiod)}}};function trim(a){return a.replace(/^\s+/g,"").replace(/\s+$/g,"")}function traducir(b){var h="";var g="";var e="";if(document.getElementById("lenguajeJavascript")){e=document.getElementById("lenguajeJavascript").value}var f=leerCookie("view-language-cookie");if(f!=null){f=trim(f)}else{f="español"}var d=e.split("javascript");for(x=0;x<d.length;x++){if(d[x].substr(0,f.length)==f){h=h+d[x].split("|")[2]+"|"}if(d[x].substr(0,f.length)==f){g=g+d[x].split("|")[1]+"|"}}if(g!=undefined&&g!=""){var c=g.split("|");var a=h.split("|");for(l=0;l<c.length;l++){if(b==c[l]){return a[l]}}}return b}var entro=true;var nar=true;var vectNarrow=new Array();var count;var primero;function ocultarMenu(a){$("ul#subMenuChoose2 li").css({display:"none"})}function changeColor(b,a){b.addClass(a)}function mostrarNarrowMenu(b,a){count=count+1;if(vectNarrow[0]==primero){vectNarrow[count]=a;if(vectNarrow[count].split("saca")[1]==vectNarrow[0].split("saca")[1]){vectNarrow=new Array();count=0;primero=""}else{$("li#"+vectNarrow[count]).siblings().find("ul").css({visibility:"hidden"});$("li#"+vectNarrow[count]).find("ul").css({visibility:"hidden"});$("li#"+vectNarrow[count]).find("ul:first").css({visibility:"visible"})}}if(count==0){primero=a;vectNarrow[0]=a;$("[id*=narrow] ul").css({visibility:"hidden"});$("li#"+a).find("ul:first").css({visibility:"visible"})}}function nada(a){entro=false;nar=false}function sacarNarrows(a){if(($(a).parent().parent().attr("id"))=="subMenuChoose2"){$("[id*=narrow] ul").css({visibility:"hidden"})}}function stopMenu2(a){vectNarrow[0]="x";count=-1;primero="";var b=$("ul#subMenuChoose2 li",a).css("display");if(b==undefined||b=="none"){entro=true}if(nar){if(entro){entro=false;$("ul#subMenuChoose2 li").css({display:"none"});$(a).not("span").find("ul:first").attr("id","subMenuChoose");$("ul#subMenuChoose li").css({display:""});$("[id*=narrow] ul").css({visibility:"hidden"});$(a).not("span").find("ul:first").attr("id","subMenuChoose2")}else{$("ul#subMenuChoose2 li").css({display:"none"});entro=true}}else{nar=true}}function codeNum(a){$("."+$(".selectIdDinamicoHidden_h").val()).keydown(function(c){var b=c.charCode?c.charCode:c.keyCode;if(b==9){$("."+$(".selectIdDinamicoHidden_h").val()).blur()}})}function tooltipselect(a){if(a.selectedIndex!=-1&&a.options[a.selectedIndex]!=null){a.title=a.options[a.selectedIndex].text}}function getDocumentForm(){return document.getElementById("main_form_modal")||document.getElementById("main_form")}function getDocumentIDForm(){if(document.getElementById("main_form_modal")!=null){return"main_form_modal"}return"main_form"}function changeImage(c,a){var b=c.src;var d=$(c).attr("alt");$(a).fadeOut("slow",function(){$(a).attr("src",b);$(a).attr("alt",d);$(a).fadeIn()})}function submitLogin(g){var b="";var d="seleccion="+encodeURIParams(g)+"&";b=document.getElementById("uuid");d+=b.name+"="+encodeURIParams(b.value)+"&";b=document.getElementById("IDContexto");if(b!=null){d+=b.name+"="+encodeURIParams(b.value)+"&"}b=document.getElementById("loginContext");var c=false;var e="";if(b){d+=b.name+"="+encodeURIParams(b.value)+"&";b=document.getElementById("identificationTypeContext");d+=b.name+"="+encodeURIParams(b.value)+"&";b=document.getElementById("workflowContext");d+=b.name+"="+encodeURIParams(b.value)+"&";b=document.getElementById("userNameContext");d+=b.name+"="+encodeURIParams(b.value)+"&";b=document.getElementById("passwordContext");d+=b.name+"="+encodeURIParams(b.value)+"&";c=true;b=document.getElementById("returnUrlErrorContext");e=b.value}d=d.substr(0,(d.length-1));var f="";if(CyberBank.encryption.enable){var a=getRandomPassword();d=JSON.stringify(createSecureRequest(d,a));f={parameters:d}}else{f=d}$.ajaxInvoker({type:"POST",url:"index",data:f,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8","Get-Form":"true"},async:false}).done(function(j,m,k){var h=j;if(CyberBank.encryption.enable){h=resolveSecureResponse(j,a)}if(trim(h)!="logout"){if(successLogin(trim(h))){$("#seleccion").val("successLogin");$("#loginForm").submit()}else{if(c&&hasErrorToShow(h)){closeSesion();window.location.href=getUrlExternalError(e,h);return}}cargarPrimerLayout(h,g);fillUuid();$("#cyberbankBody").show();$("#languageContainer").css("display","block");CyberBank.utils.resetButtonCursors();showModalWindow()}else{doLogout()}}).always(function(){})}function getUrlExternalError(c,a){var b=c;b+="?errorMessage="+getErrorMessage(a);return b}function hasErrorToShow(a){var b=getErrorMessage(a);if(null==b||"null"==b||typeof(b)==="undefined"||b==="undefined"){return false}return true}function getErrorMessage(a){var b=$(a).find(".error-panel_title").html();return escape(b)}function successLogin(a){try{return(a.trim()=="successLogin")}catch(b){return false}}function drawHoverComponent(b){if(!b){return}var e=b.attr("id");var d=$("#"+e).attr("class");$("#"+e).removeAttr("style");if(isIENavigator()){return drawHoverCompForIE(e,d)}try{var a=jss("."+d+":hover").get();$.each(a,function(f,g){$("#"+e).css(f,jss("."+d+":hover").get(f))})}catch(c){}}function drawHoverCompForIE(e,d){if(!d){return}if(!e){return}var c=["font-family","font-size","font-weight","font-style","color","text-transform","text-decoration","letter-spacing","word-spacing","line-height","text-align","vertical-align","direction","background-color","background-image","background-repeat","background-position","background-attachment","opacity","width","height","top","right","bottom","left","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","position","display","visibility","z-index","overflow-x","overflow-y","white-space","clip","float","clear","cursor","list-style-image","list-style-position","list-style-type","marker-offset"];for(var b=0,a=c.length;b<a;b++){if(jss("."+d+":hover").get(c[b])){$("#"+e).css(c[b],jss("."+d+":hover").get(c[b]))}}}function isIENavigator(){return(navigator.appName.indexOf("Internet Explorer")!=-1)}function searhTabSelected(){var a;$("table[id^='tabComponent']").each(function(){$(this).eq(0).find("tr").each(function(){$(this).find("td").each(function(){$(this).find("span").each(function(){$(this).find("button").each(function(){if($(this).attr("seleccionado")=="true"){a=$(this)}})})})})});return a}function searchIsDefaultTabPresent(){var a;$("[name=tab-component] tr").eq(1).each(function(){$(this).find("td").each(function(){$(this).find("span").each(function(){$(this).find("button").each(function(){if($(this).attr("default")=="true"){a=$(this)}})})})});return a}function drawDefaultCssTabs(){$("table[id^='tabComponent']").each(function(){$(this).eq(0).find("tr").each(function(){$(this).find("td").each(function(){$(this).find("span").each(function(){$(this).find("button").each(function(){$(this).removeAttr("style")})})})})})}function isDrawInTab(){if(container2Draw){return true}return false}function clearTabComponent(){$("#tab").val("")}function changeIDs(e,b,a){var c=e.length+"_repeat".length;var f=c+a.toString().length;b.find("*[id]").each(function(){d++;var g=$(this).attr("id");if(!g.substring(0,3)=="div"&&!g.substring(0,3)=="req"&&!g.substring(0,6)=="hidden"){$(this).attr("id",g.substring(0,c)+a+g.substring(f))}});b.find("*[name]").each(function(){var g=$(this).attr("name");if(!g.substring(0,3)=="div"&&!g.substring(0,3)=="req"&&!g.substring(0,6)=="hidden"){$(this).attr("name",g.substring(0,c)+a+g.substring(f))}});var d=b.find("*[tabindex]").size();b.find("*[tabindex]").each(function(){var g=parseInt($(this).attr("tabindex"))+d;$(this).attr("tabindex",g)});b.find("*[value]").each(function(){$(this).attr("value","")});b.find("img").each(function(){$(this).attr("onclick","eliminarRepeteableDiv('"+e+"_repeat"+a+"','"+e+"')")});b.attr("id",e+"_repeat"+a);return b}function addNewCollectionRow(d,a){var b=parseInt($("#"+d+"_repeats").val());if(b<a){var c=$("#"+d+"_repeat"+(b-1)).clone(false);if(b==1){c.prepend("<div style='float:right;cursor:pointer'><img id='closeImg' src='./images/modal_agenda/ico_cerrar_Off.png' onclick=\"eliminarRepeteableDiv('"+d+"_repeat"+b+"','"+d+"')\"></div>")}c=changeIDs(d,c,b);$("#"+d+"_repeat"+(b-1)).after(c);$("#"+d+"_repeats").val(b+1)}}function eliminarRepeteableDiv(e,d){var b=d.length+"_repeat".length;var c=$("#"+e).attr("id").substring(b);var a=$("#"+d+"_repeats").val()-1;if(c==a){$("#"+e).remove();$("#"+d+"_repeats").val(a)}}function checkAndLoadIfSecondFactorPresent(){if($("#second-factor").length>0){if($("#second-factor").attr("display-mode")=="Modal"){$(function(){$("#second-factor").dialog({height:"auto",width:"auto",resizable:false,dialogClass:"no-close",draggable:false,position:["center","center"],closeOnEscape:false,modal:true,close:function(a,b){$(".ui-dialog").dialog(".ui-dialog").remove()},buttons:[{text:traducir("Aceptar"),icons:{primary:"ui-icon-heart"},"class":"action-button_default_blue",click:function(){var a=document.getElementById("main_form_modal");var f=true;var c="";for(var d=0;d<a.elements.length;d++){var e="";var b=retrieveFormElement(a,d);var g=b.hasAttribute("required");if(g&&b.value==""){f=false;if(b.hasAttribute("validationMessage")){c=setErrorMessage(c,b,b.getAttribute("validationMessage")+"\n")}else{c=setErrorMessage(c,b,b.getAttribute("caption")+" "+traducir("es obligatorio")+"\n")}document.getElementById(formElement.id).focus()}}if(!f){showError(c)}else{hideErrorPanel()}if($("#errorPanel").css("display")=="none"){$(this).dialog("close")}},mouseover:function(){$(this).removeClass("action-button_default_blue").addClass("action-button_default_blue:hover")},mouseout:function(){$(this).removeClass("action-button_default_blue:hover").addClass("action-button_default_blue")}},{text:traducir("Cancelar"),icons:{primary:"ui-icon-heart"},"class":"action-button_default",click:function(){submitSubmenuByAjax("massiveSelectCustomerOperationTestFramework");setLastMenuPathForDebugInfo("Technisys > Mis Productos > Posición Consolidada");$(this).dialog("close")},mouseover:function(){$(this).removeClass("action-button_default").addClass("action-button_default:hover")},mouseout:function(){$(this).removeClass("action-button_default:hover").addClass("action-button_default")},}],open:function(){$(".ui-dialog-buttonpane").find("button").addClass("action-button_loginAceptar")}})})}else{if($("#second-factor").attr("display-mode")=="Pagina"){}else{if($("#second-factor").attr("display-mode")=="Default"){}}}if(document.getElementById("secondFactorMarker")!=null&&$("#second-factor").attr("display-mode")!="Modal"){$("div > #secondFactorContainer").each(function(){if($(this).is(":visible")){$(this).find("button").each(function(){if($(this).attr("id")=="autoLoad"){$(this).hide();document.getElementById("tab").value="secondFactorContainer";secondFactorLoading=true;$(this).click()}});$(this).show()}$(this).show()})}else{$("div > #second-factor").each(function(){if($(this).is(":visible")){$(this).find("button").each(function(){if($(this).attr("id")=="autoLoad"){$(this).hide();document.getElementById("tab").value="second-factor";secondFactorLoading=true;$(this).click()}});$(this).show()}$(this).show()})}}else{}}function setContainer2Draw(a){document.getElementById("tab").value=a}function testStrength(a){transitionTo(jQuery(".medidor"),medirFortaleza(jQuery(a).val()));return true}function doLogout(){window.location.href="sso"}function toggleWidget(a){$(a).siblings(".contenido").stop(true,true).slideToggle(300);$(a).parent(".widget").toggleClass("abierto")}function callWidgetAjax(e,c,b){var d="uuid="+c+"&IDContexto="+b+"&widgetId="+e;var f="";if(CyberBank.encryption.enable){var a=getRandomPassword();d=JSON.stringify(createSecureRequest(d,a));f={parameters:d}}else{f=d}$.ajaxInvoker({type:"POST",url:"widget/update.do",headers:{"Content-type":"application/x-www-form-urlencoded"},data:f}).done(function(h,k,j){var g=h;if(CyberBank.encryption.enable){g=resolveSecureResponse(h,a)}$("#"+e).parent().html(g);$("#"+e).show()})}function updateLastMenuPathForDebugInfo(){if($("#menupath").length){$("#menupath").text("Menu: "+lastMenuPathForDebugInfo)}}function setMenuPath(a){setLastMenuPathForDebugInfo(a)}function setLastMenuPathForDebugInfo(a){lastMenuPathForDebugInfo=a}function l_DetectFirefox3(){var a=false;if(navigator&&navigator.userAgent){var b=navigator.userAgent.match(/(Firefox)\/(3\.6\.[^;\+,\/\s]+)/);if(b){a=true}}return a}function l_DetectSafariSsl(){var a=false;if(navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Safari/);if(b){b=navigator.userAgent.match(/Chrome/);if(!b&&document.location.protocol==="https:"){a=true}}}return a}function l_DetectSafariMac(){var a=false;if(navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Safari/);if(b){b=navigator.userAgent.match(/Chrome/);if(!b&&navigator.userAgent.match(/Macintosh/)){a=true}}}return a}function l_DetectIncompetentBrowsers(){return l_DetectFirefox3()||l_DetectSafariSsl()||l_DetectSafariMac()}function l_UseHtml5Audio(){var a=false;var b=document.createElement("audio");a=(!!(b.canPlayType)&&!!(b.canPlayType("audio/wav"))&&!l_DetectIncompetentBrowsers());return a}function playSound(a){if(!document.getElementById){return}var d="audio.wav?time="+new Date();var f=document.getElementById(a+"_audioDiv");f.innerHTML="";var c=l_UseHtml5Audio();if(c){var b=new Audio(d);b.id=a+"_audio";b.type="audio/wav";b.autobuffer=false;b.loop=false;f.appendChild(b);b.play()}else{var e="<object id='"+a+"_audio' height='0' width='0' style='width:0; height:0;'><param name='AutoStart' value='true' /><param name='AutoPlay' value='true' /><param name='Volume' value='100' /><param name='PlayCount' value='1' /><param name='FileName' value='"+d+"' /><embed id='"+a+"_audio' src='"+d+"' autoplay='true' autostart='true' hidden='true' volume='100' type='audio/wav' style='display:inline;' /></object>";f.innerHTML=e}}function updateCaptcha(a){$("#"+a).attr("src","Captcha?time="+new Date())}var cachedHiddenColumns=new Object();function updateHiddenColumn(a){var b=[];$("#"+a+" input:checkbox:not(:checked)").each(function(){b.push($(this).attr("name"))});cachedHiddenColumns[a]=b}function hideColumns(a,d){if(cachedHiddenColumns!==undefined&&cachedHiddenColumns[a]!==undefined){var c=cachedHiddenColumns[a];$("#"+a+" input:checkbox").each(function(){if(c.indexOf($(this).attr("name"))!=-1){$(this).removeAttr("checked")}else{$(this).attr("checked",true)}});cachedHiddenColumns[a]=undefined}var b="";if($('table[id^="'+d+b+'_"]').length>0&&($('table[id^="'+d+b+'_"] .collection-table_noelements').length<1)){b="_"}$("#"+a+" input:checkbox:not(:checked)").each(function(){var e=parseInt($(this).attr("name").split("_check_")[1])+1;$('table[id^="'+d+b+'"]').each(function(){$(this).find("tbody").find("td:nth-child("+e+")").hide();$(this).find("thead").find("th:nth-child("+e+")").hide()})});$("#"+a+" input:checkbox").off("click");$("#"+a+" input:checkbox").click(function(){var e=parseInt($(this).attr("name").split("_check_")[1])+1;$('table[id^="'+d+b+'"]').each(function(){$(this).find("tbody").find("td:nth-child("+e+")").toggle();$(this).find("thead").find("th:nth-child("+e+")").toggle()})});$("#"+a).hide()}function showHideColumnFilter(a){$("#"+a).toggle("slow");var b=$("#"+a+"_title").html();var c=b.replace("&lt;&lt;","&gt;&gt;");if(b===c){c=$("#"+a+"_title").html().replace("&gt;&gt;","&lt;&lt;")}$("#"+a+"_title").html(c)}function validateMaxColumnFilter(a,b){if(b>0){var c=$("#"+a+" input:checkbox:checked").length;$("#"+a+" input:checkbox:not(:checked)").prop("disabled",c>=b);$("#"+a+" input:checkbox:checked").prop("disabled",c<2)}}function setCookie(b,f,c){var e=new Date();e.setTime(e.getTime()+c*1000);var a="expires="+e.toGMTString();document.cookie=b+"="+f+"; "+a}function getCookie(d){var b=d+"=";var a=document.cookie.split(";");for(var e=0;e<a.length;e++){var f=a[e].trim();if(f.indexOf(b)==0){return f.substring(b.length,f.length)}}return""}function changeLanguage(){var a="view-language-cookie";var b=604800;var d=getCookie(a);var c=$("#languageCombo").val();if(d!=c){setCookie(a,c,b)}}var divActual;function dropDownDescription(c,a){if(divActual==undefined){$("#"+c).slideDown("400","swing");divActual=c;var d=a.find("td[class$='_flecha']");var b=d.attr("class");d.removeClass(b);d.addClass(b+"_close")}else{if(divActual!=c){$("#"+divActual).hide();$("#"+c).slideDown("400","swing");divActual=c;var d=a.parent().find("td[class$='_flecha_close']").each(function(e){var f=$(this).attr("class");$(this).removeClass(f);$(this).addClass(f.substring(0,f.lastIndexOf("_close")))});var d=a.find("td[class$='_flecha']");var b=d.attr("class");d.removeClass(b);d.addClass(b+"_close")}else{document.getElementById(divActual).style.display="none";divActual=undefined;var d=a.find("td[class$='_flecha_close']");var b=d.attr("class");d.removeClass(b);d.addClass(b.substring(0,b.lastIndexOf("_close")))}}}function collectionSelectAllRecords(a,b){$(".checkboxCollection_"+b).prop("checked",$(a).prop("checked"))}function checkUncheckSelectAllButon(a){if($(".checkboxCollection_"+a).length==$(".checkboxCollection_"+a+":checked").length){$("#multiCheck_"+a).attr("checked","checked")}else{$("#multiCheck_"+a).removeAttr("checked")}}function checkUncheckSelectAllButonOnLoad(){$("input[id^='multiCheck_']").each(function(){var b=$(this).attr("id");var a=b.substring(b.indexOf("_")+1,b.lenght);checkUncheckSelectAllButon(a)})}function msieversion(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE ");if(a>0){return parseInt(b.substring(a+5,b.indexOf(".",a)))}else{return 0}}function updateAllHiddenColumns(){$("div[id$='_columnFilter']").each(function(){updateHiddenColumn($(this).attr("id"))})}function hideAllColumns(){$("div[id$='_columnFilter']").each(function(){var b=$(this).attr("id");var a=b.substring(0,b.lastIndexOf("_columnFilter"));hideColumns(b,a)})}function validateAllMaxColumnFilter(){$("div[id$='_columnFilter']").each(function(){var a=$(this).attr("id");validateMaxColumnFilter(a,$("#"+a+"_maxColumnFilter").val())})}function getInternetExplorerVersion(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}function disableScroll(){$("body").css({overflow:"hidden"})}function enableScroll(){$("body").css({overflow:"auto"})}$("body").ready(function(){$("body").bind("DOMSubtreeModified",function(){if($("#modalWindow").length){disableScroll()}else{enableScroll()}})});function preProcessingSubmit(){return}function downloadPdf(d){var c="";var b="";b=document.getElementById("uuid");c+=b.name+"="+encodeURIParams(b.value)+"&";c+="file="+encodeURIParams(d);var a=window.open("./downloadPdf?"+c,"_blank","fullscreen=yes")}function reloadLogin(){}function dobleLisFileSearch(a,c){var d=document.getElementById(a).value.toLowerCase();var b=$("#"+c).find("option");for(i=0;i<b.length;i++){if(!b[i].label.toLowerCase().includes(d)&&d!=""){b[i].style.display="none"}else{b[i].style.display=""}}}function isValidInvocation(c){if("successLogin"==$("#loginForm > #seleccion").val()){return false}var b=c+executionUUID;var a="";if($("#main_form_modal").length>0){a=c+$("#main_form_modal > #uuid_ajax").val()}else{a=c+$("#main_form > #uuid_ajax").val()}if(b!=a){return false}return true}function getLastLayoutAgainOnError(){window.status=traducir("Ejecutando...");if(procesando==false){setProcesando(true);timerId=window.setTimeout("setProcesando(false)",7000)}else{$.hideprogress();return}$("#modalWindow").jqmHide();updateAllHiddenColumns();var b=$("input[name='uuid']").val();var c="uuid="+b;var d="";if(CyberBank.encryption.enable){var a=getRandomPassword();c=JSON.stringify(createSecureRequest(c,a));d={parameters:c}}else{d=c}$.ajaxInvoker({type:"POST",url:"index",data:d,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8",rebuildLayout:"true","Get-Form":"true"},async:false}).done(function(e,g,f){submitFormByAjax_DoneLogic(e,a)}).fail(function(e,g,f){submitFormByAjax_FailLogic(e,g,f,a)}).always(function(){anularTimeout(timerId);$.hideprogress()})}function inIframe(){try{return window.self!==window.top}catch(a){return true}}function mapReportToContext(b,c,d){formElement=document.getElementById("uuid");parameters=formElement.name+"="+encodeURIParams(formElement.value)+"&param1="+c;mostrarEnEjecucion();var e="";if(CyberBank.encryption.enable){var a=getRandomPassword();parameters=JSON.stringify(createSecureRequest(parameters,a));e={parameters:parameters}}else{e=parameters}setTimeout(function(){$.ajaxInvoker({type:"POST",url:b,data:e,headers:{"Content-Type":"application/x-www-form-urlencoded","Get-Form":"true"},async:(d==undefined?true:d)}).done(function(g,k,j){var f=g;if(CyberBank.encryption.enable){f=resolveSecureResponse(g,a)}try{g=$.parseJSON(f)}catch(h){console.log("Error de parseo al generar el reporte: "+c)}if(g.result=="success"){buttonName=g.actionButton;$("#"+buttonName).click()}else{console.log("Error al generar el reporte: "+c);buttonName=g.actionButton;$("#"+buttonName).click()}}).always(function(){anularTimeout(timerId);$.hideprogress()})},100)};