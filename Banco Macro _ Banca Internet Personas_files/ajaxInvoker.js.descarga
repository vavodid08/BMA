var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(function(b){var a=b({});b.ajaxInvoker=function(e){var d;if(CyberBank.sessionTimeOut){doLogout();return b.ajax()}if(CyberBank.encryption.enable){e.dataType="json"}if(ajaxInvokerTimeout!="-1"){e.timeout=ajaxInvokerTimeout}if(isSafari){var c=false;if(!e.async){e.beforeSend=function(){b.showprogress();if(!e.escapeConfim){b(window).bind("beforeunload",function(){return confirm("Seguro?")})}};c=true}e.async=true;if(c){d=b.ajaxQueue(e).always(function(){b.hideprogress();b(window).unbind("beforeunload")}).fail(function(f,i,g){failAjaxLog(e);var h=getExtraDataOnFail(f,i,g);displayTimeoutAjaxError(e,h)})}else{d=b.ajaxQueue(e).fail(function(f,i,g){failAjaxLog(e);var h=getExtraDataOnFail(f,i,g);displayTimeoutAjaxError(e,h)})}}else{d=b.ajax(e)}return d}})(jQuery);(function(b){var a=b({});b.ajaxQueue=function(g){var e,c=b.Deferred(),f=c.promise();a.queue(d);f.abort=function(j){if(e){return e.abort(j)}var h=a.queue(),i=b.inArray(d,h);if(i>-1){h.splice(i,1)}c.rejectWith(g.context||g,[f,j,""]);return f};function d(h){e=b.ajax(g).done(c.resolve).fail(c.reject).then(h,h)}return f}})(jQuery);function failAjaxLog(b){var a=$("#uuid").val();$.ajax({type:"POST",url:"ajaxTimeout",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8"},data:{uuid:a,urlParam:b.url,dataParams:b.data},async:true}).done(console.log("Timeout"))}function displayTimeoutAjaxError(c,b){if(c.url.indexOf("widget")!=-1){var a=getQueryVariable("widgetId",c.data);$("#"+a).html(traducir("No se puede establecer conexion con el Servidor"));return}displayTimeoutError(b)}function getQueryVariable(a,f){var c=f;var d=c.split("&");for(var b=0;b<d.length;b++){var e=d[b].split("=");if(decodeURIComponent(e[0])==a){return decodeURIComponent(e[1])}}console.log("Query variable %s not found",a)};