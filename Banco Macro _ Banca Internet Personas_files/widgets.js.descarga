var widgetReloadableIds=[];var widgetAsyncIds=[];var widgetsRelodablesAlerts=[];function reloadWidgets(){reloadTemplateWidgets();reloadAsyncWidgets()}function reloadTemplateWidgets(){for(i=0;i<widgetReloadableIds.length;i++){if(!(typeof(widgetReloadableIds[i])==="undefined")){var b=$("#uuid").val();var d="uuid="+encodeURIComponent(b)+"&";d+="widgetId="+encodeURIComponent(widgetReloadableIds[i]);var c="";var a;if(CyberBank.encryption.enable){a=getRandomPassword();d=JSON.stringify(createSecureRequest(d,a));c={parameters:d}}else{c=d}if($("#"+widgetReloadableIds[i]+"_hideOnReload").length>0){$("#"+widgetReloadableIds[i]+"_hideOnReload").css("display","none")}$.ajaxInvoker({type:"POST",url:"widget/update.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8",widgetId:widgetReloadableIds[i]},data:c,async:true}).done(reloadWidget(widgetReloadableIds[i],"templateWidget_",a))}}}function reloadAsyncWidgets(){for(i=0;i<widgetAsyncIds.length;i++){if(!(typeof(widgetAsyncIds[i])==="undefined")){var b=$("#uuid").val();var d="uuid="+encodeURIComponent(b)+"&";d+="widgetId="+encodeURIComponent(widgetAsyncIds[i])+"&";d+="asyncWidget="+encodeURIComponent("true");var a;var c="";if(CyberBank.encryption.enable){a=getRandomPassword();d=JSON.stringify(createSecureRequest(d,a));c={parameters:d}}else{c=d}$.ajaxInvoker({type:"POST",url:"widget/update.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8",widgetId:widgetAsyncIds[i]},data:c,async:true,}).done(reloadWidget(widgetAsyncIds[i],"",a))}}widgetAsyncIds.length=0}var reloadWidget=function(b,c,a){return function(d){var e=d;if(CyberBank.encryption.enable){e=resolveSecureResponse(d,a)}if(e.indexOf("noRefresh")!=0){$("#"+c+b).html("").append(e)}if($("#"+widgetReloadableIds[i]+"_hideOnReload").length>0){$("#"+widgetReloadableIds[i]+"_hideOnReload").css("display","block")}}};function updateWidgetContext(c){var g=c;var e=$("#"+c).attr("widgetCollectionJar");if(e){g=c.substring(0,c.indexOf("_"))}var a=$("#uuid").val();var d=$("#"+c+"_outParams").val();var b=d.split("||");var h="";h+=addParameters(b);h+="uuid="+encodeURIComponent(a)+"&";h+="widgetId="+encodeURIComponent(g);var f="";if(CyberBank.encryption.enable){var j=getRandomPassword();h=JSON.stringify(createSecureRequest(h,j));f={parameters:h}}else{f=h}$.ajaxInvoker({type:"POST",url:"widget/updateContext.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8"},data:f,async:false}).done()}function executeWidgetAction(c,j,e){var g=c;if($("#"+c+j).length>0){var h=$("#"+c+j).attr("collectionActionButton");if(h=="true"){g=c.substring(0,c.indexOf("_"))}if(e){updateWidgetContext(g)}$("#"+c+j).click()}else{var a=$("#uuid").val();var d=$("#"+c+"_outParams").val();if((typeof(d)==="undefined")){d=""}var b=d.split("||");var k="";k+=addParameters(b);k+="uuid="+encodeURIComponent(a)+"&";k+="widgetId="+encodeURIComponent(c)+"&";k+="actionId="+encodeURIComponent(j)+"&";k+="updateContext="+encodeURIComponent(e);var f="";if(CyberBank.encryption.enable){var l=getRandomPassword();k=JSON.stringify(createSecureRequest(k,l));f={parameters:k}}else{f=k}$.ajaxInvoker({type:"POST",url:"widget/excuteService.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8"},data:f,async:true}).done(function(n,p,o){var m=n;if(CyberBank.encryption.enable){m=resolveSecureResponse(n,l)}if(m.indexOf("noRefresh")!=0){$("#"+c+"_htmlContent").html(m)}})}}function executeWidgetAction(d,k,f,c){var h=d;if($("#"+d+k).length>0){var j=$("#"+d).attr("collectionActionButton");if(j=="true"){h=d.substring(0,d.indexOf("_"))}if(f){updateWidgetContext(d)}$("#"+d+k).click()}else{var b=$("#uuid").val();var e=$("#"+d+"_outParams").val();if((typeof(e)==="undefined")){e=""}var a=e.split("||");var l="";l+=addParameters(a);l+="uuid="+encodeURIComponent(b)+"&";l+="widgetId="+encodeURIComponent(d)+"&";l+="actionId="+encodeURIComponent(k)+"&";l+="updateContext="+encodeURIComponent(f);var g="";if(CyberBank.encryption.enable){var m=getRandomPassword();l=JSON.stringify(createSecureRequest(l,m));g={parameters:l}}else{g=l}$.ajaxInvoker({type:"POST",url:"widget/excuteService.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8"},data:g,async:c}).done(function(o,q,p){var n=o;if(CyberBank.encryption.enable){if(typeof o==="string"){o=$.parseJSON(o)}n=resolveSecureResponse(o,m)}if(n.indexOf("noRefresh")!=0){$("#"+d+"_htmlContent").html(n)}})}}function executeWidgetActionC(d,h,f,c){if($("#"+d+h).length>0){updateWidgetContext(d);$("#"+d+h).click()}else{var a=$("#uuid").val();var e=$("#"+d+"_outParams").val();if((typeof(e)==="undefined")){e=""}var b=e.split("||");var j="";j+=addParameters(b);j+="uuid="+encodeURIComponent(a)+"&";j+="widgetId="+encodeURIComponent(d)+"&";j+="actionId="+encodeURIComponent(h)+"&";j+="updateContext="+encodeURIComponent(f);var g="";if(CyberBank.encryption.enable){var k=getRandomPassword();j=JSON.stringify(createSecureRequest(j,k));g={parameters:j}}else{g=j}$.ajaxInvoker({type:"POST",url:"widget/excuteService.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8"},data:g,async:true,success:function(m,o,n){var l=m;if(CyberBank.encryption.enable){if(typeof m==="string"){m=$.parseJSON(m)}l=resolveSecureResponse(m,k)}if(l.indexOf("noRefresh")!=0){$("#"+d+"_htmlContent").find("#"+c).html(l)}}})}}function executeOnLoadWidgetAction(c,b){var d=$("#uuid").val();var e="uuid="+encodeURIComponent(d)+"&";e+="widgetId="+encodeURIComponent(c)+"&";e+="actionId="+encodeURIComponent(b)+"&";e+="onLoadAction="+encodeURIComponent("true");var f="";if(CyberBank.encryption.enable){var a=getRandomPassword();e=JSON.stringify(createSecureRequest(e,a));f={parameters:e}}else{f=e}$.ajaxInvoker({type:"POST",url:"widget/excuteService.do",headers:{"Content-type":"application/x-www-form-urlencoded"},data:f,async:true}).done(function(h,k,j){var g=h;if(CyberBank.encryption.enable){if(typeof h==="string"){h=$.parseJSON(h)}g=resolveSecureResponse(h,a)}$("#"+c).html(g)})}function setTimerWidgetAction(c,a,b,e,d){$.timer(e,function(g){try{var f=$("#uuid").val();if(f!=d||typeof $("#periodic_"+c).val()==="undefined"){g.stop();return}else{if($("#periodic_"+c).data("unicwidgetid")==b){executeWidgetAction(c,a,true)}else{g.stop()}}}catch(h){g.stop();$("#"+c).html(h)}})}function executeWidgetActionWithCallBack(c,m,g,d){var k=c;if($("#"+c+m).length>0){var l=$("#"+c+m).attr("collectionActionButton");if(l=="true"){k=c.substring(0,c.indexOf("_"))}if(g){updateWidgetContext(k)}$("#"+c+m).click()}else{var b=$("#uuid").val();var e=$("#"+c+"_outParams").val();if((typeof(e)==="undefined")){e=""}var a=e.split("||");var n="";for(var h=0;h<a.length;h++){var f=$("#"+a[h]);if($(f).is("input")||$(f).is("select")||$(f).is("checkbox")||$(f).is("radio")){valor=$(f).val()}else{valor=$(f).html()}n+=a[h]+"="+encodeURIComponent(valor)+"&"}n+="uuid="+b+"&widgetId="+c+"&actionId="+m+"&updateContext="+g;var j="";if(CyberBank.encryption.enable){var o=getRandomPassword();n=JSON.stringify(createSecureRequest(n,o));j={parameters:n}}else{j=n}$.ajaxInvoker({type:"POST",url:"widget/excuteService.do",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF8"},data:j,async:true}).done(function(q,s,r){var p=q;if(CyberBank.encryption.enable){p=resolveSecureResponse(q,o)}d(p)})}}function addParameters(a){var d="";for(var b=0;b<a.length;b++){var c=$("#"+a[b]);if($(c).is("input")||$(c).is("select")||$(c).is("checkbox")||$(c).is("radio")){valor=$(c).val()}else{valor=$(c).html()}d+=a[b]+"="+encodeURIComponent(valor)+"&"}return d};